import{d as Z,u as G,a as H,c as D,b as a,e as o,f as e,h as J,g as t,k as m,j as u,t as s,m as p,l as _,F as T,r as B,i as K,q as Q,s as C}from"./app-Az55F6M8.js";import{_ as X,u as Y}from"./useActionConfirmation-BPstB5Uy.js";import{_ as ee}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as j}from"./index-BLT0FxeU.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{_ as h,a as b,b as y,c as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-DL5VZqU4.js";import{_ as te,a as se,b as oe,c as ne,d as de}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D7dEZzdR.js";import{_ as ae}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CpvOfIA5.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-9NyD3cCB.js";import{_ as w}from"./StatusBadge.vue_vue_type_script_setup_true_lang-Ik7GkR5h.js";import{u as ie}from"./useDateFormat-BThD_v7S.js";import{W as I,B as le,F as V,_ as re,g as ce,a as me,m as ue,Z as _e}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{A as fe}from"./arrow-left-DLIy3lRN.js";import{P as ve}from"./pencil-B0Lx0GLH.js";import{C as N}from"./calendar-CPex_lsz.js";import{U as pe}from"./user-DuKwlFf0.js";import"./index-Dwg1ok0u.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./VisuallyHidden-C4XAoWlX.js";import"./useForwardExpose-Dz4tKeCh.js";import"./index-BDqSilVs.js";import"./createLucideIcon-iLJQO7DH.js";const xe={class:"flex h-full flex-1 flex-col gap-6 p-6"},ge={class:"flex items-center justify-between"},he={class:"flex items-center gap-4"},be={class:"flex items-center gap-2"},ye={class:"grid gap-6 lg:grid-cols-2"},ke={class:"grid gap-4 sm:grid-cols-2"},$e={class:"text-muted-foreground text-sm"},Ve={class:"font-medium"},Ce={class:"text-muted-foreground text-sm"},je={class:"font-medium"},we={class:"sm:col-span-2"},ze={class:"text-muted-foreground text-sm"},Fe={class:"font-medium"},Ue={class:"text-muted-foreground text-sm"},De={class:"font-medium"},Te={class:"text-muted-foreground text-sm"},Be={class:"font-medium"},Ie={class:"text-muted-foreground text-sm"},Ne={class:"font-medium"},Se={class:"text-muted-foreground text-sm"},Ae={class:"font-medium"},Pe={class:"grid grid-cols-2 gap-4"},qe={class:"rounded-lg border p-4 text-center"},Ee={class:"text-3xl font-bold"},Le={class:"text-muted-foreground text-sm"},Me={class:"rounded-lg border p-4 text-center"},Oe={class:"text-3xl font-bold"},Re={class:"text-muted-foreground text-sm"},We={key:0,class:"divide-y"},Ze=["onClick"],Ge={class:"flex items-center gap-4"},He={class:"font-medium"},Je={class:"text-muted-foreground text-sm"},Ke={class:"flex items-center gap-4"},Qe={class:"font-medium"},Xe={key:1,class:"text-muted-foreground py-8 text-center"},Ye={key:0,class:"divide-y"},et=["onClick"],tt={class:"flex items-center gap-4"},st={class:"font-medium"},ot={class:"text-muted-foreground text-sm"},nt={key:1,class:"text-muted-foreground py-8 text-center"},dt={class:"grid gap-4"},at={class:"grid grid-cols-2 gap-4"},it={class:"space-y-2"},lt={class:"text-sm font-medium"},rt={key:0,class:"text-sm text-destructive"},ct={class:"space-y-2"},mt={class:"text-sm font-medium"},ut={key:0,class:"text-sm text-destructive"},_t={class:"space-y-2"},ft={class:"text-sm font-medium"},vt={key:0,class:"text-sm text-destructive"},pt={class:"space-y-2"},xt={class:"text-sm font-medium"},gt={key:0,class:"text-sm text-destructive"},ht={class:"grid grid-cols-2 gap-4"},bt={class:"space-y-2"},yt={class:"text-sm font-medium"},kt={key:0,class:"text-sm text-destructive"},$t={class:"space-y-2"},Vt={class:"text-sm font-medium"},Ct={key:0,class:"text-sm text-destructive"},jt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},wt={class:"text-muted-foreground text-sm"},zt={class:"font-medium"},Ft={class:"text-muted-foreground text-sm"},Ut={class:"font-medium"},Dt={class:"text-muted-foreground text-sm"},Tt={class:"font-medium"},Bt={class:"text-muted-foreground text-sm"},It={class:"font-medium"},os=Z({__name:"Show",props:{vendor:{}},setup(l){const c=l,{t:d}=G(),{formatDateOnly:z,formatDateTime:F}=ie(),{canUpdate:S}=ce(),v=Y(),A=[{title:d("nav.vendors"),href:I().url},{title:c.vendor.name,href:"#"}],g=Q(!1);function U(f){return f?f.includes("T")?f.split("T")[0]:f.includes(" ")?f.split(" ")[0]:f:""}const n=H({code:c.vendor.code,name:c.vendor.name,address:c.vendor.address,join_date:U(c.vendor.join_date),contact_person:c.vendor.contact_person,tax_id:c.vendor.tax_id,is_active:c.vendor.is_active});function P(){C.get(I().url)}function q(){n.code=c.vendor.code,n.name=c.vendor.name,n.address=c.vendor.address,n.join_date=U(c.vendor.join_date),n.contact_person=c.vendor.contact_person,n.tax_id=c.vendor.tax_id,n.is_active=c.vendor.is_active,n.clearErrors(),g.value=!0}function E(){n.put(_e(c.vendor.id).url,{onSuccess:()=>{g.value=!1}})}function L(){v.requestConfirmation({title:d("common.update"),description:d("vendors.edit_description"),confirmText:d("common.save"),details:[{label:d("vendors.code"),value:n.code||"-"},{label:d("vendors.name"),value:n.name||"-"}]},E)}function M(f){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(f)}function O(f){C.get(me(f).url)}function R(f){C.get(ue(f).url)}return(f,r)=>(m(),D(re,{breadcrumbs:A},{default:a(()=>[o(e(J),{title:`${e(d)("vendors.vendor")} - ${l.vendor.name}`},null,8,["title"]),t("div",xe,[t("div",ge,[t("div",he,[o(e($),{variant:"outline",size:"icon",onClick:P},{default:a(()=>[o(e(fe),{class:"size-4"})]),_:1}),o(ee,{title:l.vendor.name,description:e(d)("vendors.vendor_details")},null,8,["title","description"])]),t("div",be,[o(e(w),{active:l.vendor.is_active},null,8,["active"]),e(S)("vendors")?(m(),D(e($),{key:0,onClick:q},{default:a(()=>[o(e(ve),{class:"mr-2 size-4"}),u(" "+s(e(d)("common.edit")),1)]),_:1})):p("",!0)])]),t("div",ye,[o(e(h),null,{default:a(()=>[o(e(b),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(le),{class:"size-5"}),u(" "+s(e(d)("vendors.vendor_info")),1)]),_:1})]),_:1}),o(e(k),{class:"space-y-4"},{default:a(()=>[t("div",ke,[t("div",null,[t("p",$e,s(e(d)("vendors.code")),1),t("p",Ve,s(l.vendor.code),1)]),t("div",null,[t("p",Ce,s(e(d)("vendors.name")),1),t("p",je,s(l.vendor.name),1)]),t("div",we,[t("p",ze,s(e(d)("vendors.address")),1),t("p",Fe,s(l.vendor.address||"-"),1)]),t("div",null,[t("p",Ue,s(e(d)("vendors.contact_person")),1),t("p",De,s(l.vendor.contact_person||"-"),1)]),t("div",null,[t("p",Te,s(e(d)("vendors.phone")),1),t("p",Be,s(l.vendor.phone||"-"),1)]),t("div",null,[t("p",Ie,s(e(d)("vendors.email")),1),t("p",Ne,s(l.vendor.email||"-"),1)]),t("div",null,[t("p",Se,s(e(d)("vendors.tax_id")),1),t("p",Ae,s(l.vendor.tax_id||"-"),1)])])]),_:1})]),_:1}),o(e(h),null,{default:a(()=>[o(e(b),null,{default:a(()=>[o(e(y),null,{default:a(()=>[u(s(e(d)("common.statistics")),1)]),_:1})]),_:1}),o(e(k),null,{default:a(()=>[t("div",Pe,[t("div",qe,[t("p",Ee,s(l.vendor.contracts?.length||0),1),t("p",Le,s(e(d)("nav.contracts")),1)]),t("div",Me,[t("p",Oe,s(l.vendor.tickets?.length||0),1),t("p",Re,s(e(d)("nav.tickets")),1)])])]),_:1})]),_:1})]),o(e(h),null,{default:a(()=>[o(e(b),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(V),{class:"size-5"}),u(" "+s(e(d)("vendors.related_contracts"))+" ",1),o(e(j),{variant:"secondary"},{default:a(()=>[u(s(l.vendor.contracts?.length||0),1)]),_:1})]),_:1})]),_:1}),o(e(k),null,{default:a(()=>[l.vendor.contracts?.length?(m(),_("div",We,[(m(!0),_(T,null,B(l.vendor.contracts,i=>(m(),_("div",{key:i.id,class:"flex cursor-pointer items-center justify-between py-4 transition-colors hover:bg-muted/50",onClick:W=>O(i.id)},[t("div",Ge,[t("div",null,[t("p",He,s(i.number),1),t("p",Je,[o(e(N),{class:"mr-1 inline size-3"}),u(" "+s(e(z)(i.date)),1)])])]),t("div",Ke,[t("span",Qe,s(M(i.amount)),1),o(e(j),{variant:i.cooperation_type==="progress"?"default":"secondary"},{default:a(()=>[u(s(e(d)(`contracts.cooperation_types.${i.cooperation_type}`)),1)]),_:2},1032,["variant"]),o(e(w),{active:i.is_active},null,8,["active"])])],8,Ze))),128))])):(m(),_("div",Xe,[o(e(V),{class:"mx-auto mb-2 size-8 opacity-50"}),t("p",null,s(e(d)("vendors.no_contracts")),1)]))]),_:1})]),_:1}),o(e(h),null,{default:a(()=>[o(e(b),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(V),{class:"size-5"}),u(" "+s(e(d)("vendors.related_tickets"))+" ",1),o(e(j),{variant:"secondary"},{default:a(()=>[u(s(l.vendor.tickets?.length||0),1)]),_:1})]),_:1})]),_:1}),o(e(k),null,{default:a(()=>[l.vendor.tickets?.length?(m(),_("div",Ye,[(m(!0),_(T,null,B(l.vendor.tickets.slice(0,10),i=>(m(),_("div",{key:i.id,class:"flex cursor-pointer items-center justify-between py-4 transition-colors hover:bg-muted/50",onClick:W=>R(i.id)},[t("div",tt,[t("div",null,[t("p",st,s(i.number),1),t("p",ot,[o(e(N),{class:"mr-1 inline size-3"}),u(" "+s(e(z)(i.date)),1)])])]),o(e(w),{active:i.status==="complete","active-text":e(d)("tickets.status_types.complete"),"inactive-text":e(d)("tickets.status_types.incomplete")},null,8,["active","active-text","inactive-text"])],8,et))),128))])):(m(),_("div",nt,[o(e(V),{class:"mx-auto mb-2 size-8 opacity-50"}),t("p",null,s(e(d)("vendors.no_tickets")),1)]))]),_:1})]),_:1}),o(e(te),{open:g.value,"onUpdate:open":r[7]||(r[7]=i=>g.value=i)},{default:a(()=>[o(e(se),{class:"sm:max-w-[500px]"},{default:a(()=>[o(e(oe),null,{default:a(()=>[o(e(ne),null,{default:a(()=>[u(s(e(d)("vendors.edit")),1)]),_:1}),o(e(de),null,{default:a(()=>[u(s(e(d)("vendors.edit_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:K(L,["prevent"]),class:"space-y-4"},[t("div",dt,[t("div",at,[t("div",it,[t("label",lt,s(e(d)("vendors.code")),1),o(e(x),{modelValue:e(n).code,"onUpdate:modelValue":r[0]||(r[0]=i=>e(n).code=i),disabled:e(n).processing},null,8,["modelValue","disabled"]),e(n).errors.code?(m(),_("p",rt,s(e(n).errors.code),1)):p("",!0)]),t("div",ct,[t("label",mt,s(e(d)("vendors.join_date")),1),o(e(x),{modelValue:e(n).join_date,"onUpdate:modelValue":r[1]||(r[1]=i=>e(n).join_date=i),type:"date",disabled:e(n).processing},null,8,["modelValue","disabled"]),e(n).errors.join_date?(m(),_("p",ut,s(e(n).errors.join_date),1)):p("",!0)])]),t("div",_t,[t("label",ft,s(e(d)("vendors.name")),1),o(e(x),{modelValue:e(n).name,"onUpdate:modelValue":r[2]||(r[2]=i=>e(n).name=i),disabled:e(n).processing},null,8,["modelValue","disabled"]),e(n).errors.name?(m(),_("p",vt,s(e(n).errors.name),1)):p("",!0)]),t("div",pt,[t("label",xt,s(e(d)("vendors.address")),1),o(e(x),{modelValue:e(n).address,"onUpdate:modelValue":r[3]||(r[3]=i=>e(n).address=i),disabled:e(n).processing},null,8,["modelValue","disabled"]),e(n).errors.address?(m(),_("p",gt,s(e(n).errors.address),1)):p("",!0)]),t("div",ht,[t("div",bt,[t("label",yt,s(e(d)("vendors.contact_person")),1),o(e(x),{modelValue:e(n).contact_person,"onUpdate:modelValue":r[4]||(r[4]=i=>e(n).contact_person=i),disabled:e(n).processing},null,8,["modelValue","disabled"]),e(n).errors.contact_person?(m(),_("p",kt,s(e(n).errors.contact_person),1)):p("",!0)]),t("div",$t,[t("label",Vt,s(e(d)("vendors.tax_id")),1),o(e(x),{modelValue:e(n).tax_id,"onUpdate:modelValue":r[5]||(r[5]=i=>e(n).tax_id=i),disabled:e(n).processing},null,8,["modelValue","disabled"]),e(n).errors.tax_id?(m(),_("p",Ct,s(e(n).errors.tax_id),1)):p("",!0)])])]),o(e(ae),null,{default:a(()=>[o(e($),{type:"button",variant:"outline",onClick:r[6]||(r[6]=i=>g.value=!1),disabled:e(n).processing},{default:a(()=>[u(s(e(d)("common.cancel")),1)]),_:1},8,["disabled"]),o(e($),{type:"submit",disabled:e(n).processing},{default:a(()=>[u(s(e(n).processing?e(d)("common.saving"):e(d)("common.save")),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),o(e(h),null,{default:a(()=>[o(e(b),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(pe),{class:"size-5"}),u(" "+s(e(d)("common.audit_info")),1)]),_:1})]),_:1}),o(e(k),null,{default:a(()=>[t("div",jt,[t("div",null,[t("p",wt,s(e(d)("common.created_by")),1),t("p",zt,s(l.vendor.created_by?.name||"-"),1)]),t("div",null,[t("p",Ft,s(e(d)("common.created_at")),1),t("p",Ut,s(e(F)(l.vendor.created_at)),1)]),t("div",null,[t("p",Dt,s(e(d)("common.updated_by")),1),t("p",Tt,s(l.vendor.updated_by?.name||"-"),1)]),t("div",null,[t("p",Bt,s(e(d)("common.updated_at")),1),t("p",It,s(e(F)(l.vendor.updated_at)),1)])])]),_:1})]),_:1})]),o(X,{open:e(v).open,"onUpdate:open":r[8]||(r[8]=i=>e(v).open=i),title:e(v).title,description:e(v).description,"confirm-text":e(v).confirmText,"cancel-text":e(v).cancelText,destructive:e(v).destructive,details:e(v).details,onConfirm:e(v).confirm,onCancel:e(v).cancel},null,8,["open","title","description","confirm-text","cancel-text","destructive","details","onConfirm","onCancel"])]),_:1}))}});export{os as default};
