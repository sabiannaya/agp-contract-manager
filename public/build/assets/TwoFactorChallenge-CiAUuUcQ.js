import{d as k,a as p,c as w,b as i,e as o,f as e,h as V,g as r,i as d,m,l as v,F,p as T,j as y,t as _,s as $,r as g}from"./app-D6ZExuG4.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-D2_aPVBO.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BAMJN8k7.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-B9Upw0KD.js";import{_ as B,a as R,b as j}from"./InputOTPSlot.vue_vue_type_script_setup_true_lang-DeeOSmiy.js";import{_ as N}from"./AuthLayout.vue_vue_type_script_setup_true_lang-DLzSXPjE.js";import"./index-Dnaiof97.js";import"./useForwardPropsEmits-BgLpAiDO.js";import"./index-BDqSilVs.js";const S={class:"space-y-6"},A={class:"flex flex-col items-center justify-center space-y-3 text-center"},M={class:"flex w-full items-center justify-center"},U={class:"text-center text-sm text-muted-foreground"},q={class:"text-center text-sm text-muted-foreground"},W=k({__name:"TwoFactorChallenge",setup(D){const c=$(()=>l.value?{title:"Recovery Code",description:"Please confirm access to your account by entering one of your emergency recovery codes.",buttonText:"login using an authentication code"}:{title:"Authentication Code",description:"Enter the authentication code provided by your authenticator application.",buttonText:"login using a recovery code"}),l=g(!1),n=p({code:""}),s=p({recovery_code:""}),f=()=>{l.value=!l.value,n.clearErrors(),s.clearErrors(),n.code="",s.recovery_code=""},u=g(""),h=()=>{n.code=u.value,n.post("/two-factor-challenge",{onError:()=>{u.value=""}})},C=()=>{s.post("/two-factor-challenge")};return(I,t)=>(d(),w(N,{title:c.value.title,description:c.value.description},{default:i(()=>[o(e(V),{title:"Two-Factor Authentication"}),r("div",S,[l.value?(d(),m("form",{key:1,onSubmit:v(C,["prevent"]),class:"space-y-4"},[o(e(E),{modelValue:e(s).recovery_code,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).recovery_code=a),name:"recovery_code",type:"text",placeholder:"Enter recovery code",autofocus:l.value,required:""},null,8,["modelValue","autofocus"]),o(b,{message:e(s).errors.recovery_code},null,8,["message"]),o(e(x),{type:"submit",class:"w-full",disabled:e(s).processing},{default:i(()=>[...t[4]||(t[4]=[y("Continue",-1)])]),_:1},8,["disabled"]),r("div",q,[t[5]||(t[5]=r("span",null,"or you can ",-1)),r("button",{type:"button",class:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",onClick:f},_(c.value.buttonText),1)])],32)):(d(),m("form",{key:0,onSubmit:v(h,["prevent"]),class:"space-y-4"},[r("div",A,[r("div",M,[o(e(B),{id:"otp",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),maxlength:6,disabled:e(n).processing,autofocus:""},{default:i(()=>[o(e(R),null,{default:i(()=>[(d(),m(F,null,T(6,a=>o(e(j),{key:a,index:a-1},null,8,["index"])),64))]),_:1})]),_:1},8,["modelValue","disabled"])]),o(b,{message:e(n).errors.code},null,8,["message"])]),o(e(x),{type:"submit",class:"w-full",disabled:e(n).processing},{default:i(()=>[...t[2]||(t[2]=[y("Continue",-1)])]),_:1},8,["disabled"]),r("div",U,[t[3]||(t[3]=r("span",null,"or you can ",-1)),r("button",{type:"button",class:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",onClick:f},_(c.value.buttonText),1)])],32))])]),_:1},8,["title","description"]))}});export{W as default};
