import{d as P,u as E,c as w,b as c,e as s,f as t,h as U,g as e,i as d,j as a,t as i,k as v,m as u,F as q,p as A,q as f}from"./app-D6ZExuG4.js";import{_ as S}from"./Heading.vue_vue_type_script_setup_true_lang-C_Qaqaft.js";import{_ as $}from"./index-MxVPBNtp.js";import{_}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BAMJN8k7.js";import{_ as k,a as p,b as g,c as h}from"./CardTitle.vue_vue_type_script_setup_true_lang-D4csAZoX.js";import{_ as H}from"./StatusBadge.vue_vue_type_script_setup_true_lang-DTLVhpcY.js";import{u as K}from"./useDateFormat-BThD_v7S.js";import{v as z,F as x,d as M,u as O,z as G,s as J,D as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DhQ7Babn.js";import{a as R,p as W}from"./index-PwX051BP.js";import{A as X}from"./arrow-left-BcIyfv1Q.js";import{P as Y}from"./pencil-BG-Ex8ol.js";import{C as Z}from"./calendar-BDP9TT7_.js";import{E as tt}from"./eye-Cfy1nj4J.js";import{c as et}from"./createLucideIcon-BXqO2veZ.js";import{U as st}from"./user-CQweja3Q.js";import"./index-Dnaiof97.js";import"./VisuallyHidden-D-NgPM13.js";import"./useForwardExpose-6n7ayWvE.js";import"./useForwardPropsEmits-BgLpAiDO.js";import"./index-BDqSilVs.js";const it=et("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ot={class:"flex h-full flex-1 flex-col gap-6 p-6"},ct={class:"flex items-center justify-between"},nt={class:"flex items-center gap-4"},at={class:"flex items-center gap-2"},dt={class:"grid gap-6 lg:grid-cols-2"},lt={class:"grid gap-4 sm:grid-cols-2"},rt={class:"text-muted-foreground text-sm"},mt={class:"font-medium"},ut={class:"text-muted-foreground text-sm"},ft={class:"font-medium"},_t={class:"sm:col-span-2"},kt={class:"text-muted-foreground text-sm"},pt={class:"font-medium"},gt={class:"text-muted-foreground text-sm"},ht={class:"font-medium"},vt={class:"text-muted-foreground text-sm"},xt={class:"text-muted-foreground text-sm"},yt={class:"font-medium"},bt={class:"text-muted-foreground text-sm"},wt={key:0,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},$t={class:"mb-2 flex items-start justify-between"},zt={class:"flex-1"},Ct={class:"text-sm font-medium"},Dt={class:"text-muted-foreground text-xs"},Bt={class:"flex gap-2"},Ft={key:1,class:"text-muted-foreground py-8 text-center"},Tt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},Vt={class:"text-muted-foreground text-sm"},jt={class:"font-medium"},It={class:"text-muted-foreground text-sm"},Lt={class:"font-medium"},Nt={class:"text-muted-foreground text-sm"},Pt={class:"font-medium"},Et={class:"text-muted-foreground text-sm"},Ut={class:"font-medium"},ne=P({__name:"Show",props:{ticket:{}},setup(n){const l=n,{t:o}=E(),{formatDateOnly:y,formatDateTime:b}=K(),{canUpdate:C}=O(),D=[{title:o("nav.tickets"),href:z().url},{title:l.ticket.number,href:"#"}];function B(){f.get(z().url)}function F(){f.get(G(l.ticket.id).url)}function T(){l.ticket.contract?.id&&f.get(J(l.ticket.contract.id).url)}function V(){l.ticket.vendor?.id&&f.get(Q(l.ticket.vendor.id).url)}function j(r){window.open(R(r).url,"_blank")}function I(r){window.open(W(r).url,"_blank")}function L(r){return o(`documents.types.${r}`)}return(r,qt)=>(d(),w(M,{breadcrumbs:D},{default:c(()=>[s(t(U),{title:`${t(o)("tickets.ticket")} - ${n.ticket.number}`},null,8,["title"]),e("div",ot,[e("div",ct,[e("div",nt,[s(t(_),{variant:"outline",size:"icon",onClick:B},{default:c(()=>[s(t(X),{class:"size-4"})]),_:1}),s(S,{title:n.ticket.number,description:t(o)("tickets.ticket_details")},null,8,["title","description"])]),e("div",at,[s(t(H),{active:n.ticket.status==="complete","active-text":t(o)("tickets.status_types.complete"),"inactive-text":t(o)("tickets.status_types.incomplete")},null,8,["active","active-text","inactive-text"]),t(C)("tickets")?(d(),w(t(_),{key:0,onClick:F},{default:c(()=>[s(t(Y),{class:"mr-2 size-4"}),a(" "+i(t(o)("common.edit")),1)]),_:1})):v("",!0)])]),e("div",dt,[s(t(k),null,{default:c(()=>[s(t(p),null,{default:c(()=>[s(t(g),{class:"flex items-center gap-2"},{default:c(()=>[s(t(x),{class:"size-5"}),a(" "+i(t(o)("tickets.ticket_info")),1)]),_:1})]),_:1}),s(t(h),{class:"space-y-4"},{default:c(()=>[e("div",lt,[e("div",null,[e("p",rt,i(t(o)("tickets.number")),1),e("p",mt,i(n.ticket.number),1)]),e("div",null,[e("p",ut,i(t(o)("tickets.date")),1),e("p",ft,i(t(y)(n.ticket.date)),1)]),e("div",_t,[e("p",kt,i(t(o)("tickets.notes")),1),e("p",pt,i(n.ticket.notes||"-"),1)])])]),_:1})]),_:1}),s(t(k),null,{default:c(()=>[s(t(p),null,{default:c(()=>[s(t(g),null,{default:c(()=>[a(i(t(o)("tickets.related_info")),1)]),_:1})]),_:1}),s(t(h),{class:"space-y-4"},{default:c(()=>[n.ticket.contract?(d(),u("div",{key:0,class:"cursor-pointer rounded-lg border p-4 transition-colors hover:bg-muted/50",onClick:T},[e("p",gt,i(t(o)("tickets.contract")),1),e("p",ht,i(n.ticket.contract.number),1),e("p",vt,[s(t(Z),{class:"mr-1 inline size-3"}),a(" "+i(t(y)(n.ticket.contract.date)),1)])])):v("",!0),n.ticket.vendor?(d(),u("div",{key:1,class:"cursor-pointer rounded-lg border p-4 transition-colors hover:bg-muted/50",onClick:V},[e("p",xt,i(t(o)("tickets.vendor")),1),e("p",yt,i(n.ticket.vendor.name),1),e("p",bt,i(n.ticket.vendor.code),1)])):v("",!0)]),_:1})]),_:1})]),s(t(k),null,{default:c(()=>[s(t(p),null,{default:c(()=>[s(t(g),{class:"flex items-center gap-2"},{default:c(()=>[s(t(x),{class:"size-5"}),a(" "+i(t(o)("documents.documents"))+" ",1),s(t($),{variant:"secondary"},{default:c(()=>[a(i(n.ticket.documents?.length||0),1)]),_:1})]),_:1})]),_:1}),s(t(h),null,{default:c(()=>[n.ticket.documents?.length?(d(),u("div",wt,[(d(!0),u(q,null,A(n.ticket.documents,m=>(d(),u("div",{key:m.id,class:"rounded-lg border p-4"},[e("div",$t,[e("div",zt,[s(t($),{variant:"outline",class:"mb-2"},{default:c(()=>[a(i(L(m.type)),1)]),_:2},1024),e("p",Ct,i(m.original_name),1),e("p",Dt,i((m.file_size/1024).toFixed(1))+" KB ",1)])]),e("div",Bt,[s(t(_),{variant:"outline",size:"sm",onClick:N=>I(m.id)},{default:c(()=>[s(t(tt),{class:"mr-1 size-3"}),a(" "+i(t(o)("common.preview")),1)]),_:1},8,["onClick"]),s(t(_),{variant:"outline",size:"sm",onClick:N=>j(m.id)},{default:c(()=>[s(t(it),{class:"mr-1 size-3"}),a(" "+i(t(o)("common.download")),1)]),_:1},8,["onClick"])])]))),128))])):(d(),u("div",Ft,[s(t(x),{class:"mx-auto mb-2 size-8 opacity-50"}),e("p",null,i(t(o)("documents.no_documents")),1)]))]),_:1})]),_:1}),s(t(k),null,{default:c(()=>[s(t(p),null,{default:c(()=>[s(t(g),{class:"flex items-center gap-2"},{default:c(()=>[s(t(st),{class:"size-5"}),a(" "+i(t(o)("common.audit_info")),1)]),_:1})]),_:1}),s(t(h),null,{default:c(()=>[e("div",Tt,[e("div",null,[e("p",Vt,i(t(o)("common.created_by")),1),e("p",jt,i(n.ticket.created_by?.name||"-"),1)]),e("div",null,[e("p",It,i(t(o)("common.created_at")),1),e("p",Lt,i(t(b)(n.ticket.created_at)),1)]),e("div",null,[e("p",Nt,i(t(o)("common.updated_by")),1),e("p",Pt,i(n.ticket.updated_by?.name||"-"),1)]),e("div",null,[e("p",Et,i(t(o)("common.updated_at")),1),e("p",Ut,i(t(b)(n.ticket.updated_at)),1)])])]),_:1})]),_:1})])]),_:1}))}});export{ne as default};
