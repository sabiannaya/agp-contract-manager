import{d as j,u as z,a as q,c as L,b as d,e as t,f as e,h as D,g as r,x as $,l as E,j as n,t as l,i as _,m as u,k as x,F as M,p as T,s as G,q as H}from"./app-CuI7LdXL.js";import{_ as J}from"./Heading.vue_vue_type_script_setup_true_lang-BHjUqA3V.js";import{_ as b}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BUBYiqAX.js";import{_ as y,a as U,b as V,c as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-BhpnJ5ya.js";import{_ as S}from"./CardDescription.vue_vue_type_script_setup_true_lang-D4LN3jrC.js";import{_ as p}from"./Checkbox.vue_vue_type_script_setup_true_lang-BHWKOiH2.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-DLaguvqt.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-BVYJy_EQ.js";import{_ as O}from"./Textarea.vue_vue_type_script_setup_true_lang-BYhBP41M.js";import{k as g,d as Q,m as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-CwkbJi7E.js";import{A as W}from"./arrow-left-DWqgfXPD.js";import{S as X}from"./save-BUK-ELRm.js";import"./useForwardPropsEmits-CaKxx7wQ.js";import"./VisuallyHidden-DxCKGmrj.js";import"./useForwardExpose-D4WvoR71.js";import"./VisuallyHiddenInput-8nto7-pU.js";import"./check-CLJgvc3L.js";import"./createLucideIcon-CX-op3lg.js";import"./index-BRm__Hk1.js";import"./index-BDqSilVs.js";const Y={class:"p-6"},Z={class:"flex items-center gap-4"},ee={class:"grid gap-4 sm:grid-cols-2"},se={class:"space-y-2"},te={key:0,class:"text-sm text-destructive"},ie={class:"flex items-center space-x-2 pt-6"},de={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},oe={class:"grid grid-cols-2 gap-4 space-y-4"},re={class:"mb-3 flex items-center justify-between"},le={class:"font-medium"},ce={class:"text-sm text-muted-foreground"},ne={class:"flex items-center gap-2"},me={class:"text-xs text-muted-foreground"},fe={class:"flex flex-wrap gap-4"},_e={class:"flex items-center space-x-2"},pe={class:"flex items-center space-x-2"},ue={class:"flex items-center space-x-2"},he={class:"flex items-center space-x-2"},ve={key:0,class:"mt-2 text-sm text-destructive"},ge={class:"flex items-center justify-end gap-4"},De=j({__name:"Create",props:{pages:{}},setup(k){const F=k,{t:o}=z(),A=G(()=>[{title:o("nav.roles"),href:g().url},{title:o("roles.create"),href:"#"}]),B=F.pages.map(m=>({page_id:m.id,create:!1,read:!1,update:!1,delete:!1})),i=q({name:"",description:"",is_active:!0,privileges:B});function C(){i.post(R().url,{onSuccess:()=>{H.visit(g().url)}})}function I(m,a){const s=i.privileges.findIndex(c=>c.page_id===m);s!==-1&&(i.privileges[s].create=a,i.privileges[s].read=a,i.privileges[s].update=a,i.privileges[s].delete=a)}function h(m){return i.privileges.find(a=>a.page_id===m)}function v(m,a,s){const c=i.privileges.findIndex(P=>P.page_id===m);c!==-1&&(i.privileges[c][a]=s)}function N(m){const a=i.privileges.find(s=>s.page_id===m);return a?a.create&&a.read&&a.update&&a.delete:!1}return(m,a)=>(_(),L(Q,{breadcrumbs:A.value},{default:d(()=>[t(e(D),{title:e(o)("roles.create")},null,8,["title"]),r("div",Y,[r("div",Z,[t(e($),{href:e(g)().url},{default:d(()=>[t(e(b),{variant:"ghost",size:"icon"},{default:d(()=>[t(e(W),{class:"size-4"})]),_:1})]),_:1},8,["href"]),t(J,{title:e(o)("roles.create"),description:e(o)("roles.create_description")},null,8,["title","description"])]),r("form",{onSubmit:E(C,["prevent"]),class:"space-y-6"},[t(e(y),null,{default:d(()=>[t(e(U),null,{default:d(()=>[t(e(V),null,{default:d(()=>[n(l(e(o)("roles.basic_info")),1)]),_:1}),t(e(S),null,{default:d(()=>[n(l(e(o)("roles.basic_info_description")),1)]),_:1})]),_:1}),t(e(w),{class:"space-y-4"},{default:d(()=>[r("div",ee,[r("div",se,[t(e(f),{for:"name"},{default:d(()=>[n(l(e(o)("roles.name")),1)]),_:1}),t(e(K),{id:"name",modelValue:e(i).name,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).name=s),disabled:e(i).processing,required:""},null,8,["modelValue","disabled"]),e(i).errors.name?(_(),u("p",te,l(e(i).errors.name),1)):x("",!0)]),r("div",ie,[t(e(p),{id:"is_active",checked:e(i).is_active,"onUpdate:checked":a[1]||(a[1]=s=>e(i).is_active=s),disabled:e(i).processing},null,8,["checked","disabled"]),t(e(f),{for:"is_active",class:"font-normal"},{default:d(()=>[n(l(e(o)("roles.is_active")),1)]),_:1})])]),r("div",de,[t(e(f),{for:"description"},{default:d(()=>[n(l(e(o)("roles.description_field")),1)]),_:1}),t(e(O),{id:"description",modelValue:e(i).description,"onUpdate:modelValue":a[2]||(a[2]=s=>e(i).description=s),disabled:e(i).processing,rows:2},null,8,["modelValue","disabled"]),e(i).errors.description?(_(),u("p",ae,l(e(i).errors.description),1)):x("",!0)])]),_:1})]),_:1}),t(e(y),null,{default:d(()=>[t(e(U),null,{default:d(()=>[t(e(V),null,{default:d(()=>[n(l(e(o)("roles.page_privileges")),1)]),_:1}),t(e(S),null,{default:d(()=>[n(l(e(o)("roles.page_privileges_description")),1)]),_:1})]),_:1}),t(e(w),null,{default:d(()=>[r("div",oe,[(_(!0),u(M,null,T(k.pages,s=>(_(),u("div",{key:s.id,class:"rounded-lg border p-4"},[r("div",re,[r("div",null,[r("h4",le,l(s.name),1),r("p",ce,l(s.description),1)]),r("div",ne,[t(e(p),{checked:N(s.id),"onUpdate:checked":c=>I(s.id,c),disabled:e(i).processing},null,8,["checked","onUpdate:checked","disabled"]),r("span",me,l(e(o)("common.select_all")),1)])]),r("div",fe,[r("div",_e,[t(e(p),{id:`${s.id}-create`,checked:h(s.id)?.create??!1,"onUpdate:checked":c=>v(s.id,"create",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(f),{for:`${s.id}-create`,class:"text-sm font-normal"},{default:d(()=>[n(l(e(o)("common.create")),1)]),_:1},8,["for"])]),r("div",pe,[t(e(p),{id:`${s.id}-read`,checked:h(s.id)?.read??!1,"onUpdate:checked":c=>v(s.id,"read",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(f),{for:`${s.id}-read`,class:"text-sm font-normal"},{default:d(()=>[n(l(e(o)("common.read")),1)]),_:1},8,["for"])]),r("div",ue,[t(e(p),{id:`${s.id}-update`,checked:h(s.id)?.update??!1,"onUpdate:checked":c=>v(s.id,"update",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(f),{for:`${s.id}-update`,class:"text-sm font-normal"},{default:d(()=>[n(l(e(o)("common.update")),1)]),_:1},8,["for"])]),r("div",he,[t(e(p),{id:`${s.id}-delete`,checked:h(s.id)?.delete??!1,"onUpdate:checked":c=>v(s.id,"delete",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(f),{for:`${s.id}-delete`,class:"text-sm font-normal"},{default:d(()=>[n(l(e(o)("common.delete")),1)]),_:1},8,["for"])])])]))),128))]),e(i).errors.privileges?(_(),u("p",ve,l(e(i).errors.privileges),1)):x("",!0)]),_:1})]),_:1}),r("div",ge,[t(e($),{href:e(g)().url},{default:d(()=>[t(e(b),{type:"button",variant:"outline",disabled:e(i).processing},{default:d(()=>[n(l(e(o)("common.cancel")),1)]),_:1},8,["disabled"])]),_:1},8,["href"]),t(e(b),{type:"submit",disabled:e(i).processing},{default:d(()=>[t(e(X),{class:"mr-2 size-4"}),n(" "+l(e(i).processing?e(o)("common.saving"):e(o)("common.save")),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["breadcrumbs"]))}});export{De as default};
