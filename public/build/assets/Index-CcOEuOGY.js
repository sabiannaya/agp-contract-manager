import{d as q,u as E,r as g,w as M,c as _,b as t,e as s,f as e,h as R,g as n,i as p,x as S,j as i,t as r,k as v,q as h}from"./app-CuI7LdXL.js";import{_ as A}from"./Heading.vue_vue_type_script_setup_true_lang-BHjUqA3V.js";import{_ as z}from"./index-D_NX9Eof.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BUBYiqAX.js";import{S as F,_ as L}from"./DataTable.vue_vue_type_script_setup_true_lang-BKoDKxgg.js";import{_ as O,a as G,b as H,c as J,d as K}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C-SfElTY.js";import{_ as Q}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bw_2LaqB.js";import{k,o as W,_ as X,a as Y,b as Z,c as C,p as ee,U as se,S as te,d as ae,u as le,q as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-CwkbJi7E.js";import{_ as re}from"./Input.vue_vue_type_script_setup_true_lang-DLaguvqt.js";import{E as ne,_ as ie}from"./Pagination.vue_vue_type_script_setup_true_lang-8C8Mf2Mc.js";import{_ as ce}from"./StatusBadge.vue_vue_type_script_setup_true_lang-MmS8OP8w.js";import{P as ue}from"./plus-gEXAE-os.js";import{P as me}from"./pencil-CZinZyQI.js";import{T as de}from"./trash-2-C9QLNDK2.js";import{u as fe}from"./index-BRm__Hk1.js";import"./createLucideIcon-CX-op3lg.js";import"./Spinner.vue_vue_type_script_setup_true_lang-Br3sTUwP.js";import"./chevron-down-DGBHzGpy.js";import"./useForwardPropsEmits-CaKxx7wQ.js";import"./VisuallyHidden-DxCKGmrj.js";import"./useForwardExpose-D4WvoR71.js";import"./index-BDqSilVs.js";const _e={class:"flex flex-col gap-6 p-6"},pe={class:"flex items-center justify-between"},ve={class:"flex items-center gap-4"},he={class:"relative flex-1 max-w-sm"},xe={class:"overflow-auto"},be={class:"flex items-center gap-2"},ge={class:"font-medium"},ke={class:"flex items-center justify-center gap-1"},ye={class:"sr-only"},$e={class:"shrink-0 border-t bg-background pt-4"},He=q({__name:"Index",props:{roles:{},filters:{}},setup(u){const m=u,{t:a}=E(),{canCreate:w,canUpdate:V,canDelete:D}=le(),N=[{title:a("nav.roles"),href:k().url}],b=g(m.filters.search??""),P=fe(o=>{h.get(k().url,{...m.filters,search:o||void 0,page:1},{preserveState:!0,preserveScroll:!0})},300);M(b,o=>P(o));function U(o,c){h.get(k().url,{...m.filters,sort:o,direction:c},{preserveState:!0,preserveScroll:!0})}function I(o){h.get(o,{},{preserveState:!0,preserveScroll:!0})}const j=[{key:"name",label:a("roles.name"),sortable:!0},{key:"description",label:a("roles.description")},{key:"permissions_count",label:a("roles.permissions"),class:"text-center"},{key:"users_count",label:a("roles.users"),class:"text-center"},{key:"is_active",label:a("common.status"),sortable:!0},{key:"actions",label:"",class:"w-[70px]"}],d=g(!1),f=g(null);function B(o){f.value=o,d.value=!0}function T(){f.value&&h.delete(oe(f.value.id).url,{onSuccess:()=>{d.value=!1,f.value=null}})}function y(o){return o.name.toLowerCase()==="admin"}return(o,c)=>(p(),_(ae,{breadcrumbs:N},{default:t(()=>[s(e(R),{title:e(a)("nav.roles")},null,8,["title"]),n("div",_e,[n("div",pe,[s(A,{title:e(a)("nav.roles"),description:e(a)("roles.description")},null,8,["title","description"]),e(w)("role_groups")?(p(),_(e(S),{key:0,href:e(W)().url},{default:t(()=>[s(e(x),null,{default:t(()=>[s(e(ue),{class:"mr-2 size-4"}),i(" "+r(e(a)("roles.create")),1)]),_:1})]),_:1},8,["href"])):v("",!0)]),n("div",ve,[n("div",he,[s(e(F),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),s(e(re),{modelValue:b.value,"onUpdate:modelValue":c[0]||(c[0]=l=>b.value=l),placeholder:e(a)("common.search"),class:"pl-9"},null,8,["modelValue","placeholder"])])]),n("div",xe,[s(e(L),{columns:j,data:u.roles.data,"sort-field":m.filters.sort,"sort-direction":m.filters.direction,"empty-text":e(a)("common.no_data"),hoverable:"",onSort:U},{"cell-name":t(({row:l,value:$})=>[n("div",be,[s(e(te),{class:"size-4 text-muted-foreground"}),n("span",ge,r($),1),y(l)?(p(),_(e(z),{key:0,variant:"outline"},{default:t(()=>[i(r(e(a)("roles.system")),1)]),_:1})):v("",!0)])]),"cell-permissions_count":t(({value:l})=>[s(e(z),{variant:"secondary"},{default:t(()=>[i(r(l),1)]),_:2},1024)]),"cell-users_count":t(({value:l})=>[n("div",ke,[s(e(se),{class:"size-4 text-muted-foreground"}),n("span",null,r(l),1)])]),"cell-is_active":t(({value:l})=>[s(e(ce),{status:l?"active":"inactive"},null,8,["status"])]),"cell-actions":t(({row:l})=>[s(e(X),null,{default:t(()=>[s(e(Y),{"as-child":""},{default:t(()=>[s(e(x),{variant:"ghost",size:"icon",class:"size-8"},{default:t(()=>[s(e(ne),{class:"size-4"}),n("span",ye,r(e(a)("common.actions")),1)]),_:1})]),_:1}),s(e(Z),{align:"end"},{default:t(()=>[e(V)("role_groups")?(p(),_(e(C),{key:0,"as-child":""},{default:t(()=>[s(e(S),{href:e(ee)(l).url,class:"flex items-center"},{default:t(()=>[s(e(me),{class:"mr-2 size-4"}),i(" "+r(e(a)("common.edit")),1)]),_:1},8,["href"])]),_:2},1024)):v("",!0),e(D)("role_groups")&&!y(l)?(p(),_(e(C),{key:1,class:"text-destructive focus:text-destructive",onClick:$=>B(l)},{default:t(()=>[s(e(de),{class:"mr-2 size-4"}),i(" "+r(e(a)("common.delete")),1)]),_:1},8,["onClick"])):v("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","sort-field","sort-direction","empty-text"])]),n("div",$e,[s(e(ie),{links:u.roles.links,from:u.roles.from,to:u.roles.to,total:u.roles.total,onNavigate:I},null,8,["links","from","to","total"])])]),s(e(O),{open:d.value,"onUpdate:open":c[2]||(c[2]=l=>d.value=l)},{default:t(()=>[s(e(G),{class:"sm:max-w-[400px]"},{default:t(()=>[s(e(H),null,{default:t(()=>[s(e(J),null,{default:t(()=>[i(r(e(a)("common.confirm_delete")),1)]),_:1}),s(e(K),null,{default:t(()=>[i(r(e(a)("roles.delete_confirmation",{name:f.value?.name})),1)]),_:1})]),_:1}),s(e(Q),null,{default:t(()=>[s(e(x),{variant:"outline",onClick:c[1]||(c[1]=l=>d.value=!1)},{default:t(()=>[i(r(e(a)("common.cancel")),1)]),_:1}),s(e(x),{variant:"destructive",onClick:T},{default:t(()=>[i(r(e(a)("common.delete")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{He as default};
