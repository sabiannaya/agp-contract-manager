import{d as A,u as U,c as $,b as c,e as i,f as t,h as q,g as e,k as d,j as n,t as s,m,l as r,F as H,r as K,s as k}from"./app-Az55F6M8.js";import{_ as M}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as y}from"./index-BLT0FxeU.js";import{_ as p}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{_ as g,a as v,b as h,c as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-DL5VZqU4.js";import{_ as O}from"./StatusBadge.vue_vue_type_script_setup_true_lang-Ik7GkR5h.js";import{u as R}from"./useDateFormat-BThD_v7S.js";import{w as C,F as b,_ as G,g as J,A as Q,a as W,E as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{a as Y,p as Z}from"./index-PwX051BP.js";import{A as tt}from"./arrow-left-DLIy3lRN.js";import{P as et}from"./pencil-B0Lx0GLH.js";import{C as st}from"./calendar-CPex_lsz.js";import{D as it}from"./dollar-sign-r0xfU81d.js";import{E as ot}from"./eye-CfgMQgEh.js";import{c as at}from"./createLucideIcon-iLJQO7DH.js";import{U as ct}from"./user-DuKwlFf0.js";import"./index-Dwg1ok0u.js";import"./VisuallyHidden-C4XAoWlX.js";import"./useForwardExpose-Dz4tKeCh.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./index-BDqSilVs.js";const nt=at("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),dt={class:"flex h-full flex-1 flex-col gap-6 p-6"},lt={class:"flex items-center justify-between"},rt={class:"flex items-center gap-4"},ut={class:"flex items-center gap-2"},mt={class:"grid gap-6 lg:grid-cols-2"},_t={class:"grid gap-4 sm:grid-cols-2"},ft={class:"text-muted-foreground text-sm"},kt={class:"font-medium"},pt={class:"text-muted-foreground text-sm"},gt={class:"font-medium"},vt={class:"sm:col-span-2"},ht={class:"text-muted-foreground text-sm"},xt={class:"font-medium"},yt={class:"text-muted-foreground text-sm"},bt={class:"font-medium"},wt={class:"text-muted-foreground text-sm"},$t={class:"text-muted-foreground text-sm"},Ct={class:"font-medium"},zt={class:"text-muted-foreground text-sm"},Dt={class:"flex items-center justify-between"},Ft={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},It={class:"text-muted-foreground text-sm"},jt={class:"text-lg font-semibold"},Bt={class:"text-muted-foreground text-sm"},Tt={key:0},Vt={class:"text-muted-foreground text-sm"},Nt={class:"font-medium"},Pt={key:1},Et={class:"text-muted-foreground text-sm"},Lt={class:"font-medium"},St={key:2},At={class:"text-muted-foreground text-sm"},Ut={class:"font-medium"},qt={key:3},Ht={class:"text-muted-foreground text-sm"},Kt={class:"font-medium"},Mt={key:0,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},Ot={class:"mb-2 flex items-start justify-between"},Rt={class:"flex-1"},Gt={class:"text-sm font-medium"},Jt={class:"text-muted-foreground text-xs"},Qt={class:"flex gap-2"},Wt={key:1,class:"text-muted-foreground py-8 text-center"},Xt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},Yt={class:"text-muted-foreground text-sm"},Zt={class:"font-medium"},te={class:"text-muted-foreground text-sm"},ee={class:"font-medium"},se={class:"text-muted-foreground text-sm"},ie={class:"font-medium"},oe={class:"text-muted-foreground text-sm"},ae={class:"font-medium"},Fe=A({__name:"Show",props:{ticket:{}},setup(a){const u=a,{t:o}=U(),{formatDateOnly:w,formatDateTime:f}=R(),{canUpdate:z}=J(),D=[{title:o("nav.tickets"),href:C().url},{title:u.ticket.number,href:"#"}];function F(){k.get(C().url)}function I(){k.get(Q(u.ticket.id).url)}function j(){u.ticket.contract?.id&&k.get(W(u.ticket.contract.id).url)}function B(){u.ticket.vendor?.id&&k.get(X(u.ticket.vendor.id).url)}function T(l){window.open(Y(l).url,"_blank")}function V(l){window.open(Z(l).url,"_blank")}function N(l){return o(`documents.types.${l}`)}function P(l){return l==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)}function E(){k.get(`/payment-tracker/${u.ticket.id}`)}function L(l){switch(l){case"paid":return"default";case"approved":return"default";case"pending":return"secondary";case"rejected":return"destructive";default:return"outline"}}return(l,ce)=>(d(),$(G,{breadcrumbs:D},{default:c(()=>[i(t(q),{title:`${t(o)("tickets.ticket")} - ${a.ticket.number}`},null,8,["title"]),e("div",dt,[e("div",lt,[e("div",rt,[i(t(p),{variant:"outline",size:"icon",onClick:F},{default:c(()=>[i(t(tt),{class:"size-4"})]),_:1}),i(M,{title:a.ticket.number,description:t(o)("tickets.ticket_details")},null,8,["title","description"])]),e("div",ut,[i(t(O),{active:a.ticket.status==="complete","active-text":t(o)("tickets.status_types.complete"),"inactive-text":t(o)("tickets.status_types.incomplete")},null,8,["active","active-text","inactive-text"]),t(z)("tickets")?(d(),$(t(p),{key:0,onClick:I},{default:c(()=>[i(t(et),{class:"mr-2 size-4"}),n(" "+s(t(o)("common.edit")),1)]),_:1})):m("",!0)])]),e("div",mt,[i(t(g),null,{default:c(()=>[i(t(v),null,{default:c(()=>[i(t(h),{class:"flex items-center gap-2"},{default:c(()=>[i(t(b),{class:"size-5"}),n(" "+s(t(o)("tickets.ticket_info")),1)]),_:1})]),_:1}),i(t(x),{class:"space-y-4"},{default:c(()=>[e("div",_t,[e("div",null,[e("p",ft,s(t(o)("tickets.number")),1),e("p",kt,s(a.ticket.number),1)]),e("div",null,[e("p",pt,s(t(o)("tickets.date")),1),e("p",gt,s(t(w)(a.ticket.date)),1)]),e("div",vt,[e("p",ht,s(t(o)("tickets.notes")),1),e("p",xt,s(a.ticket.notes||"-"),1)])])]),_:1})]),_:1}),i(t(g),null,{default:c(()=>[i(t(v),null,{default:c(()=>[i(t(h),null,{default:c(()=>[n(s(t(o)("tickets.related_info")),1)]),_:1})]),_:1}),i(t(x),{class:"space-y-4"},{default:c(()=>[a.ticket.contract?(d(),r("div",{key:0,class:"cursor-pointer rounded-lg border p-4 transition-colors hover:bg-muted/50",onClick:j},[e("p",yt,s(t(o)("tickets.contract")),1),e("p",bt,s(a.ticket.contract.number),1),e("p",wt,[i(t(st),{class:"mr-1 inline size-3"}),n(" "+s(t(w)(a.ticket.contract.date)),1)])])):m("",!0),a.ticket.vendor?(d(),r("div",{key:1,class:"cursor-pointer rounded-lg border p-4 transition-colors hover:bg-muted/50",onClick:B},[e("p",$t,s(t(o)("tickets.vendor")),1),e("p",Ct,s(a.ticket.vendor.name),1),e("p",zt,s(a.ticket.vendor.code),1)])):m("",!0)]),_:1})]),_:1})]),i(t(g),null,{default:c(()=>[i(t(v),null,{default:c(()=>[e("div",Dt,[i(t(h),{class:"flex items-center gap-2"},{default:c(()=>[i(t(it),{class:"size-5"}),n(" "+s(t(o)("tickets.payment_info")),1)]),_:1}),i(t(p),{variant:"outline",size:"sm",onClick:E},{default:c(()=>[n(s(t(o)("tickets.view_in_payment_tracker")),1)]),_:1})])]),_:1}),i(t(x),null,{default:c(()=>[e("div",Ft,[e("div",null,[e("p",It,s(t(o)("payment_tracker.amount")),1),e("p",jt,s(P(a.ticket.amount)),1)]),e("div",null,[e("p",Bt,s(t(o)("payment_tracker.approval_status")),1),i(t(y),{variant:L(a.ticket.approval_status),class:"mt-1"},{default:c(()=>[n(s(t(o)(`payment_tracker.statuses.${a.ticket.approval_status}`)),1)]),_:1},8,["variant"])]),a.ticket.reference_no?(d(),r("div",Tt,[e("p",Vt,s(t(o)("payment_tracker.reference_no")),1),e("p",Nt,s(a.ticket.reference_no),1)])):m("",!0),a.ticket.paid_at?(d(),r("div",Pt,[e("p",Et,s(t(o)("tickets.paid_at")),1),e("p",Lt,s(t(f)(a.ticket.paid_at)),1)])):m("",!0),a.ticket.submitted_at?(d(),r("div",St,[e("p",At,s(t(o)("tickets.submitted_at")),1),e("p",Ut,s(t(f)(a.ticket.submitted_at)),1)])):m("",!0),a.ticket.approved_at?(d(),r("div",qt,[e("p",Ht,s(t(o)("tickets.approved_at")),1),e("p",Kt,s(t(f)(a.ticket.approved_at)),1)])):m("",!0)])]),_:1})]),_:1}),i(t(g),null,{default:c(()=>[i(t(v),null,{default:c(()=>[i(t(h),{class:"flex items-center gap-2"},{default:c(()=>[i(t(b),{class:"size-5"}),n(" "+s(t(o)("documents.documents"))+" ",1),i(t(y),{variant:"secondary"},{default:c(()=>[n(s(a.ticket.documents?.length||0),1)]),_:1})]),_:1})]),_:1}),i(t(x),null,{default:c(()=>[a.ticket.documents?.length?(d(),r("div",Mt,[(d(!0),r(H,null,K(a.ticket.documents,_=>(d(),r("div",{key:_.id,class:"rounded-lg border p-4"},[e("div",Ot,[e("div",Rt,[i(t(y),{variant:"outline",class:"mb-2"},{default:c(()=>[n(s(N(_.type)),1)]),_:2},1024),e("p",Gt,s(_.original_name),1),e("p",Jt,s((_.file_size/1024).toFixed(1))+" KB ",1)])]),e("div",Qt,[i(t(p),{variant:"outline",size:"sm",onClick:S=>V(_.id)},{default:c(()=>[i(t(ot),{class:"mr-1 size-3"}),n(" "+s(t(o)("common.preview")),1)]),_:1},8,["onClick"]),i(t(p),{variant:"outline",size:"sm",onClick:S=>T(_.id)},{default:c(()=>[i(t(nt),{class:"mr-1 size-3"}),n(" "+s(t(o)("common.download")),1)]),_:1},8,["onClick"])])]))),128))])):(d(),r("div",Wt,[i(t(b),{class:"mx-auto mb-2 size-8 opacity-50"}),e("p",null,s(t(o)("documents.no_documents")),1)]))]),_:1})]),_:1}),i(t(g),null,{default:c(()=>[i(t(v),null,{default:c(()=>[i(t(h),{class:"flex items-center gap-2"},{default:c(()=>[i(t(ct),{class:"size-5"}),n(" "+s(t(o)("common.audit_info")),1)]),_:1})]),_:1}),i(t(x),null,{default:c(()=>[e("div",Xt,[e("div",null,[e("p",Yt,s(t(o)("common.created_by")),1),e("p",Zt,s(a.ticket.created_by?.name||"-"),1)]),e("div",null,[e("p",te,s(t(o)("common.created_at")),1),e("p",ee,s(t(f)(a.ticket.created_at)),1)]),e("div",null,[e("p",se,s(t(o)("common.updated_by")),1),e("p",ie,s(a.ticket.updated_by?.name||"-"),1)]),e("div",null,[e("p",oe,s(t(o)("common.updated_at")),1),e("p",ae,s(t(f)(a.ticket.updated_at)),1)])])]),_:1})]),_:1})])]),_:1}))}});export{Fe as default};
