import{d as E,u as U,c as $,b as a,e as i,f as t,h as q,g as e,i as d,j as n,t as s,k as m,m as r,F as H,p as K,q as k}from"./app-CuI7LdXL.js";import{_ as M}from"./Heading.vue_vue_type_script_setup_true_lang-BHjUqA3V.js";import{_ as y}from"./index-D_NX9Eof.js";import{_ as p}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BUBYiqAX.js";import{_ as v,a as g,b as h,c as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-BhpnJ5ya.js";import{_ as O}from"./StatusBadge.vue_vue_type_script_setup_true_lang-MmS8OP8w.js";import{u as R}from"./useDateFormat-BThD_v7S.js";import{t as C,F as b,d as G,u as J,y as Q,s as W,A as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-CwkbJi7E.js";import{a as Y,p as Z}from"./index-PwX051BP.js";import{A as tt}from"./arrow-left-DWqgfXPD.js";import{P as et}from"./pencil-CZinZyQI.js";import{C as st}from"./calendar-B76Vfs4p.js";import{D as it}from"./dollar-sign-DkALKasg.js";import{E as ot}from"./eye-CwGG716I.js";import{c as ct}from"./createLucideIcon-CX-op3lg.js";import{U as at}from"./user-DjvsFMWj.js";import"./index-BRm__Hk1.js";import"./VisuallyHidden-DxCKGmrj.js";import"./useForwardExpose-D4WvoR71.js";import"./useForwardPropsEmits-CaKxx7wQ.js";import"./index-BDqSilVs.js";const nt=ct("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),dt={class:"flex h-full flex-1 flex-col gap-6 p-6"},lt={class:"flex items-center justify-between"},rt={class:"flex items-center gap-4"},ut={class:"flex items-center gap-2"},mt={class:"grid gap-6 lg:grid-cols-2"},_t={class:"grid gap-4 sm:grid-cols-2"},ft={class:"text-muted-foreground text-sm"},kt={class:"font-medium"},pt={class:"text-muted-foreground text-sm"},vt={class:"font-medium"},gt={class:"sm:col-span-2"},ht={class:"text-muted-foreground text-sm"},xt={class:"font-medium"},yt={class:"text-muted-foreground text-sm"},bt={class:"font-medium"},wt={class:"text-muted-foreground text-sm"},$t={class:"text-muted-foreground text-sm"},Ct={class:"font-medium"},zt={class:"text-muted-foreground text-sm"},Dt={class:"flex items-center justify-between"},Ft={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},It={class:"text-muted-foreground text-sm"},jt={class:"text-lg font-semibold"},Bt={class:"text-muted-foreground text-sm"},Tt={key:0},Vt={class:"text-muted-foreground text-sm"},Nt={class:"font-medium"},Pt={key:1},Lt={class:"text-muted-foreground text-sm"},St={class:"font-medium"},At={key:2},Et={class:"text-muted-foreground text-sm"},Ut={class:"font-medium"},qt={key:3},Ht={class:"text-muted-foreground text-sm"},Kt={class:"font-medium"},Mt={key:0,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},Ot={class:"mb-2 flex items-start justify-between"},Rt={class:"flex-1"},Gt={class:"text-sm font-medium"},Jt={class:"text-muted-foreground text-xs"},Qt={class:"flex gap-2"},Wt={key:1,class:"text-muted-foreground py-8 text-center"},Xt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},Yt={class:"text-muted-foreground text-sm"},Zt={class:"font-medium"},te={class:"text-muted-foreground text-sm"},ee={class:"font-medium"},se={class:"text-muted-foreground text-sm"},ie={class:"font-medium"},oe={class:"text-muted-foreground text-sm"},ce={class:"font-medium"},Fe=E({__name:"Show",props:{ticket:{}},setup(c){const u=c,{t:o}=U(),{formatDateOnly:w,formatDateTime:f}=R(),{canUpdate:z}=J(),D=[{title:o("nav.tickets"),href:C().url},{title:u.ticket.number,href:"#"}];function F(){k.get(C().url)}function I(){k.get(Q(u.ticket.id).url)}function j(){u.ticket.contract?.id&&k.get(W(u.ticket.contract.id).url)}function B(){u.ticket.vendor?.id&&k.get(X(u.ticket.vendor.id).url)}function T(l){window.open(Y(l).url,"_blank")}function V(l){window.open(Z(l).url,"_blank")}function N(l){return o(`documents.types.${l}`)}function P(l){return l==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)}function L(){k.get(`/payment-tracker/${u.ticket.id}`)}function S(l){switch(l){case"paid":return"default";case"approved":return"default";case"pending":return"secondary";case"rejected":return"destructive";default:return"outline"}}return(l,ae)=>(d(),$(G,{breadcrumbs:D},{default:a(()=>[i(t(q),{title:`${t(o)("tickets.ticket")} - ${c.ticket.number}`},null,8,["title"]),e("div",dt,[e("div",lt,[e("div",rt,[i(t(p),{variant:"outline",size:"icon",onClick:F},{default:a(()=>[i(t(tt),{class:"size-4"})]),_:1}),i(M,{title:c.ticket.number,description:t(o)("tickets.ticket_details")},null,8,["title","description"])]),e("div",ut,[i(t(O),{active:c.ticket.status==="complete","active-text":t(o)("tickets.status_types.complete"),"inactive-text":t(o)("tickets.status_types.incomplete")},null,8,["active","active-text","inactive-text"]),t(z)("tickets")?(d(),$(t(p),{key:0,onClick:I},{default:a(()=>[i(t(et),{class:"mr-2 size-4"}),n(" "+s(t(o)("common.edit")),1)]),_:1})):m("",!0)])]),e("div",mt,[i(t(v),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),{class:"flex items-center gap-2"},{default:a(()=>[i(t(b),{class:"size-5"}),n(" "+s(t(o)("tickets.ticket_info")),1)]),_:1})]),_:1}),i(t(x),{class:"space-y-4"},{default:a(()=>[e("div",_t,[e("div",null,[e("p",ft,s(t(o)("tickets.number")),1),e("p",kt,s(c.ticket.number),1)]),e("div",null,[e("p",pt,s(t(o)("tickets.date")),1),e("p",vt,s(t(w)(c.ticket.date)),1)]),e("div",gt,[e("p",ht,s(t(o)("tickets.notes")),1),e("p",xt,s(c.ticket.notes||"-"),1)])])]),_:1})]),_:1}),i(t(v),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),null,{default:a(()=>[n(s(t(o)("tickets.related_info")),1)]),_:1})]),_:1}),i(t(x),{class:"space-y-4"},{default:a(()=>[c.ticket.contract?(d(),r("div",{key:0,class:"cursor-pointer rounded-lg border p-4 transition-colors hover:bg-muted/50",onClick:j},[e("p",yt,s(t(o)("tickets.contract")),1),e("p",bt,s(c.ticket.contract.number),1),e("p",wt,[i(t(st),{class:"mr-1 inline size-3"}),n(" "+s(t(w)(c.ticket.contract.date)),1)])])):m("",!0),c.ticket.vendor?(d(),r("div",{key:1,class:"cursor-pointer rounded-lg border p-4 transition-colors hover:bg-muted/50",onClick:B},[e("p",$t,s(t(o)("tickets.vendor")),1),e("p",Ct,s(c.ticket.vendor.name),1),e("p",zt,s(c.ticket.vendor.code),1)])):m("",!0)]),_:1})]),_:1})]),i(t(v),null,{default:a(()=>[i(t(g),null,{default:a(()=>[e("div",Dt,[i(t(h),{class:"flex items-center gap-2"},{default:a(()=>[i(t(it),{class:"size-5"}),n(" "+s(t(o)("tickets.payment_info")),1)]),_:1}),i(t(p),{variant:"outline",size:"sm",onClick:L},{default:a(()=>[n(s(t(o)("tickets.view_in_payment_tracker")),1)]),_:1})])]),_:1}),i(t(x),null,{default:a(()=>[e("div",Ft,[e("div",null,[e("p",It,s(t(o)("payment_tracker.amount")),1),e("p",jt,s(P(c.ticket.amount)),1)]),e("div",null,[e("p",Bt,s(t(o)("payment_tracker.approval_status")),1),i(t(y),{variant:S(c.ticket.approval_status),class:"mt-1"},{default:a(()=>[n(s(t(o)(`payment_tracker.statuses.${c.ticket.approval_status}`)),1)]),_:1},8,["variant"])]),c.ticket.reference_no?(d(),r("div",Tt,[e("p",Vt,s(t(o)("payment_tracker.reference_no")),1),e("p",Nt,s(c.ticket.reference_no),1)])):m("",!0),c.ticket.paid_at?(d(),r("div",Pt,[e("p",Lt,s(t(o)("tickets.paid_at")),1),e("p",St,s(t(f)(c.ticket.paid_at)),1)])):m("",!0),c.ticket.submitted_at?(d(),r("div",At,[e("p",Et,s(t(o)("tickets.submitted_at")),1),e("p",Ut,s(t(f)(c.ticket.submitted_at)),1)])):m("",!0),c.ticket.approved_at?(d(),r("div",qt,[e("p",Ht,s(t(o)("tickets.approved_at")),1),e("p",Kt,s(t(f)(c.ticket.approved_at)),1)])):m("",!0)])]),_:1})]),_:1}),i(t(v),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),{class:"flex items-center gap-2"},{default:a(()=>[i(t(b),{class:"size-5"}),n(" "+s(t(o)("documents.documents"))+" ",1),i(t(y),{variant:"secondary"},{default:a(()=>[n(s(c.ticket.documents?.length||0),1)]),_:1})]),_:1})]),_:1}),i(t(x),null,{default:a(()=>[c.ticket.documents?.length?(d(),r("div",Mt,[(d(!0),r(H,null,K(c.ticket.documents,_=>(d(),r("div",{key:_.id,class:"rounded-lg border p-4"},[e("div",Ot,[e("div",Rt,[i(t(y),{variant:"outline",class:"mb-2"},{default:a(()=>[n(s(N(_.type)),1)]),_:2},1024),e("p",Gt,s(_.original_name),1),e("p",Jt,s((_.file_size/1024).toFixed(1))+" KB ",1)])]),e("div",Qt,[i(t(p),{variant:"outline",size:"sm",onClick:A=>V(_.id)},{default:a(()=>[i(t(ot),{class:"mr-1 size-3"}),n(" "+s(t(o)("common.preview")),1)]),_:1},8,["onClick"]),i(t(p),{variant:"outline",size:"sm",onClick:A=>T(_.id)},{default:a(()=>[i(t(nt),{class:"mr-1 size-3"}),n(" "+s(t(o)("common.download")),1)]),_:1},8,["onClick"])])]))),128))])):(d(),r("div",Wt,[i(t(b),{class:"mx-auto mb-2 size-8 opacity-50"}),e("p",null,s(t(o)("documents.no_documents")),1)]))]),_:1})]),_:1}),i(t(v),null,{default:a(()=>[i(t(g),null,{default:a(()=>[i(t(h),{class:"flex items-center gap-2"},{default:a(()=>[i(t(at),{class:"size-5"}),n(" "+s(t(o)("common.audit_info")),1)]),_:1})]),_:1}),i(t(x),null,{default:a(()=>[e("div",Xt,[e("div",null,[e("p",Yt,s(t(o)("common.created_by")),1),e("p",Zt,s(c.ticket.created_by?.name||"-"),1)]),e("div",null,[e("p",te,s(t(o)("common.created_at")),1),e("p",ee,s(t(f)(c.ticket.created_at)),1)]),e("div",null,[e("p",se,s(t(o)("common.updated_by")),1),e("p",ie,s(c.ticket.updated_by?.name||"-"),1)]),e("div",null,[e("p",oe,s(t(o)("common.updated_at")),1),e("p",ce,s(t(f)(c.ticket.updated_at)),1)])])]),_:1})]),_:1})])]),_:1}))}});export{Fe as default};
