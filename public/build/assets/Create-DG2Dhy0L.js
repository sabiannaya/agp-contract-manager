import{d as N,u as T,a as O,w as y,c as j,b as r,e as s,f as e,h as A,g as d,l as D,j as n,t as c,i as u,m as p,k as f,s as v,q as b}from"./app-D6ZExuG4.js";import{_ as E}from"./Heading.vue_vue_type_script_setup_true_lang-C_Qaqaft.js";import{_ as k}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BAMJN8k7.js";import{_ as V,a as I,b as P,c as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-D4csAZoX.js";import{_ as q}from"./CardDescription.vue_vue_type_script_setup_true_lang-Cyfhoq0p.js";import{_ as L}from"./Checkbox.vue_vue_type_script_setup_true_lang-CsdWR3ey.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-B9Upw0KD.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-B7C0xePR.js";import{_ as w}from"./Select.vue_vue_type_script_setup_true_lang-CEEQHg8s.js";import{_ as G}from"./Textarea.vue_vue_type_script_setup_true_lang-Bl9lXqTK.js";import{t as H,F as J,d as K,v as x,w as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DhQ7Babn.js";import{A as R}from"./arrow-left-BcIyfv1Q.js";import{P as W}from"./plus-Ocys-J35.js";import"./useForwardPropsEmits-BgLpAiDO.js";import"./VisuallyHidden-D-NgPM13.js";import"./index-Dnaiof97.js";import"./VisuallyHiddenInput-B9UHQZYS.js";import"./useForwardExpose-6n7ayWvE.js";import"./check-C3XzR5eS.js";import"./createLucideIcon-BXqO2veZ.js";import"./chevron-down-DKASTZ1i.js";import"./index-BDqSilVs.js";const X={class:"flex h-full flex-1 flex-col gap-6 p-6"},Y={class:"flex items-center gap-4"},Z={class:"grid gap-4 sm:grid-cols-2"},ee={class:"space-y-2"},te={key:0,class:"text-sm text-destructive"},se={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},ae={class:"space-y-2"},ie={key:0,class:"text-sm text-destructive"},re={class:"space-y-2 sm:col-span-2"},ce={key:0,class:"text-sm text-destructive"},le={class:"flex items-center space-x-2"},de={class:"text-sm text-blue-800 dark:text-blue-200"},ne={class:"flex items-center justify-end gap-4"},Te=N({__name:"Create",props:{vendors:{},contracts:{}},setup(C){const _=C,{t:o}=T(),g=H(),S=v(()=>[{title:o("nav.tickets"),href:x().url},{title:o("tickets.create"),href:"#"}]),B=v(()=>t.vendor_id?_.contracts.filter(i=>i.vendor_id===t.vendor_id):_.contracts),U=v(()=>_.vendors.map(i=>({value:i.id,label:`${i.code} - ${i.name}`}))),z=v(()=>B.value.map(i=>({value:i.id,label:i.number}))),t=O({date:new Date().toISOString().split("T")[0],contract_id:null,vendor_id:null,notes:"",is_active:!0});y(()=>t.vendor_id,i=>{if(i&&t.contract_id){const a=_.contracts.find(l=>l.id===t.contract_id);a&&a.vendor_id!==i&&(t.contract_id=null)}}),y(()=>t.contract_id,i=>{if(i){const a=_.contracts.find(l=>l.id===i);a&&(t.vendor_id=a.vendor_id)}});function h(){b.get(x().url)}function F(){t.post(Q().url,{preserveScroll:!0,onSuccess:i=>{g.success(o("tickets.created_successfully"));const a=i.props?.ticket?.id;a?b.visit(`/tickets/${a}/edit`):b.visit(x().url)},onError:()=>{g.error(o("tickets.create_failed"))}})}return(i,a)=>(u(),j(K,{breadcrumbs:S.value},{default:r(()=>[s(e(A),{title:e(o)("tickets.create")},null,8,["title"]),d("div",X,[d("div",Y,[s(e(k),{variant:"outline",size:"icon",onClick:h},{default:r(()=>[s(e(R),{class:"size-4"})]),_:1}),s(E,{title:e(o)("tickets.create"),description:e(o)("tickets.create_description")},null,8,["title","description"])]),d("form",{onSubmit:D(F,["prevent"]),class:"space-y-6"},[s(e(V),null,{default:r(()=>[s(e(I),null,{default:r(()=>[s(e(P),{class:"flex items-center gap-2"},{default:r(()=>[s(e(J),{class:"size-5"}),n(" "+c(e(o)("tickets.ticket_info")),1)]),_:1}),s(e(q),null,{default:r(()=>[n(c(e(o)("tickets.create_info_description")),1)]),_:1})]),_:1}),s(e($),{class:"space-y-4"},{default:r(()=>[d("div",Z,[d("div",ee,[s(e(m),null,{default:r(()=>[n(c(e(o)("tickets.date")),1)]),_:1}),s(e(M),{modelValue:e(t).date,"onUpdate:modelValue":a[0]||(a[0]=l=>e(t).date=l),type:"date",disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.date?(u(),p("p",te,c(e(t).errors.date),1)):f("",!0)]),d("div",se,[s(e(m),null,{default:r(()=>[n(c(e(o)("tickets.vendor")),1)]),_:1}),s(e(w),{modelValue:e(t).vendor_id,"onUpdate:modelValue":a[1]||(a[1]=l=>e(t).vendor_id=l),options:U.value,placeholder:e(o)("tickets.select_vendor"),disabled:e(t).processing,clearable:""},null,8,["modelValue","options","placeholder","disabled"]),e(t).errors.vendor_id?(u(),p("p",oe,c(e(t).errors.vendor_id),1)):f("",!0)]),d("div",ae,[s(e(m),null,{default:r(()=>[n(c(e(o)("tickets.contract")),1)]),_:1}),s(e(w),{modelValue:e(t).contract_id,"onUpdate:modelValue":a[2]||(a[2]=l=>e(t).contract_id=l),options:z.value,placeholder:e(o)("tickets.select_contract"),disabled:e(t).processing,clearable:""},null,8,["modelValue","options","placeholder","disabled"]),e(t).errors.contract_id?(u(),p("p",ie,c(e(t).errors.contract_id),1)):f("",!0)]),d("div",re,[s(e(m),null,{default:r(()=>[n(c(e(o)("tickets.notes")),1)]),_:1}),s(e(G),{modelValue:e(t).notes,"onUpdate:modelValue":a[3]||(a[3]=l=>e(t).notes=l),placeholder:e(o)("tickets.notes_placeholder"),disabled:e(t).processing,rows:3},null,8,["modelValue","placeholder","disabled"]),e(t).errors.notes?(u(),p("p",ce,c(e(t).errors.notes),1)):f("",!0)]),d("div",le,[s(e(L),{id:"is_active",checked:e(t).is_active,"onUpdate:checked":a[4]||(a[4]=l=>e(t).is_active=l),disabled:e(t).processing},null,8,["checked","disabled"]),s(e(m),{for:"is_active",class:"font-normal"},{default:r(()=>[n(c(e(o)("common.active")),1)]),_:1})])])]),_:1})]),_:1}),s(e(V),{class:"border-blue-200 bg-blue-50 dark:border-blue-900 dark:bg-blue-950"},{default:r(()=>[s(e($),{class:"p-4"},{default:r(()=>[d("p",de,c(e(o)("tickets.create_document_info")),1)]),_:1})]),_:1}),d("div",ne,[s(e(k),{type:"button",variant:"outline",onClick:h,disabled:e(t).processing},{default:r(()=>[n(c(e(o)("common.cancel")),1)]),_:1},8,["disabled"]),s(e(k),{type:"submit",disabled:e(t).processing},{default:r(()=>[s(e(W),{class:"mr-2 size-4"}),n(" "+c(e(t).processing?e(o)("common.creating"):e(o)("tickets.create")),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["breadcrumbs"]))}});export{Te as default};
