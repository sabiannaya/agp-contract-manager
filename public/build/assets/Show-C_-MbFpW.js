import{d as q,u as R,a as W,c as F,b as a,e as o,f as e,h as Y,g as t,i as m,j as u,t as s,k as v,m as _,F as U,p as D,l as G,r as H,q as $}from"./app-CuI7LdXL.js";import{_ as J}from"./Heading.vue_vue_type_script_setup_true_lang-BHjUqA3V.js";import{_ as C}from"./index-D_NX9Eof.js";import{_ as k}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BUBYiqAX.js";import{_ as g,a as h,b as y,c as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-BhpnJ5ya.js";import{_ as K,a as Q,b as X,c as Z,d as ee}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C-SfElTY.js";import{_ as te}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bw_2LaqB.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-DLaguvqt.js";import{_ as j}from"./StatusBadge.vue_vue_type_script_setup_true_lang-MmS8OP8w.js";import{u as se}from"./useDateFormat-BThD_v7S.js";import{W as B,B as oe,F as V,d as de,u as ne,Y as ae,s as ie,h as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-CwkbJi7E.js";import{A as re}from"./arrow-left-DWqgfXPD.js";import{P as ce}from"./pencil-CZinZyQI.js";import{C as I}from"./calendar-B76Vfs4p.js";import{U as me}from"./user-DjvsFMWj.js";import"./index-BRm__Hk1.js";import"./useForwardPropsEmits-CaKxx7wQ.js";import"./VisuallyHidden-DxCKGmrj.js";import"./useForwardExpose-D4WvoR71.js";import"./index-BDqSilVs.js";import"./createLucideIcon-CX-op3lg.js";const ue={class:"flex h-full flex-1 flex-col gap-6 p-6"},_e={class:"flex items-center justify-between"},ve={class:"flex items-center gap-4"},fe={class:"flex items-center gap-2"},pe={class:"grid gap-6 lg:grid-cols-2"},xe={class:"grid gap-4 sm:grid-cols-2"},ge={class:"text-muted-foreground text-sm"},he={class:"font-medium"},ye={class:"text-muted-foreground text-sm"},be={class:"font-medium"},ke={class:"sm:col-span-2"},Ve={class:"text-muted-foreground text-sm"},$e={class:"font-medium"},Ce={class:"text-muted-foreground text-sm"},je={class:"font-medium"},we={class:"text-muted-foreground text-sm"},ze={class:"font-medium"},Fe={class:"text-muted-foreground text-sm"},Ue={class:"font-medium"},De={class:"text-muted-foreground text-sm"},Be={class:"font-medium"},Ie={class:"grid grid-cols-2 gap-4"},Ne={class:"rounded-lg border p-4 text-center"},Se={class:"text-3xl font-bold"},Te={class:"text-muted-foreground text-sm"},Pe={class:"rounded-lg border p-4 text-center"},Ae={class:"text-3xl font-bold"},Ee={class:"text-muted-foreground text-sm"},Le={key:0,class:"divide-y"},Me=["onClick"],Oe={class:"flex items-center gap-4"},qe={class:"font-medium"},Re={class:"text-muted-foreground text-sm"},We={class:"flex items-center gap-4"},Ye={class:"font-medium"},Ge={key:1,class:"text-muted-foreground py-8 text-center"},He={key:0,class:"divide-y"},Je=["onClick"],Ke={class:"flex items-center gap-4"},Qe={class:"font-medium"},Xe={class:"text-muted-foreground text-sm"},Ze={key:1,class:"text-muted-foreground py-8 text-center"},et={class:"grid gap-4"},tt={class:"grid grid-cols-2 gap-4"},st={class:"space-y-2"},ot={class:"text-sm font-medium"},dt={key:0,class:"text-sm text-destructive"},nt={class:"space-y-2"},at={class:"text-sm font-medium"},it={key:0,class:"text-sm text-destructive"},lt={class:"space-y-2"},rt={class:"text-sm font-medium"},ct={key:0,class:"text-sm text-destructive"},mt={class:"space-y-2"},ut={class:"text-sm font-medium"},_t={key:0,class:"text-sm text-destructive"},vt={class:"grid grid-cols-2 gap-4"},ft={class:"space-y-2"},pt={class:"text-sm font-medium"},xt={key:0,class:"text-sm text-destructive"},gt={class:"space-y-2"},ht={class:"text-sm font-medium"},yt={key:0,class:"text-sm text-destructive"},bt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},kt={class:"text-muted-foreground text-sm"},Vt={class:"font-medium"},$t={class:"text-muted-foreground text-sm"},Ct={class:"font-medium"},jt={class:"text-muted-foreground text-sm"},wt={class:"font-medium"},zt={class:"text-muted-foreground text-sm"},Ft={class:"font-medium"},Qt=q({__name:"Show",props:{vendor:{}},setup(l){const r=l,{t:n}=R(),{formatDateOnly:w,formatDateTime:z}=se(),{canUpdate:N}=ne(),S=[{title:n("nav.vendors"),href:B().url},{title:r.vendor.name,href:"#"}],x=H(!1),d=W({code:r.vendor.code,name:r.vendor.name,address:r.vendor.address,join_date:r.vendor.join_date,contact_person:r.vendor.contact_person,tax_id:r.vendor.tax_id,is_active:r.vendor.is_active});function T(){$.get(B().url)}function P(){d.code=r.vendor.code,d.name=r.vendor.name,d.address=r.vendor.address,d.join_date=r.vendor.join_date,d.contact_person=r.vendor.contact_person,d.tax_id=r.vendor.tax_id,d.is_active=r.vendor.is_active,d.clearErrors(),x.value=!0}function A(){d.put(ae(r.vendor.id).url,{onSuccess:()=>{x.value=!1}})}function E(f){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(f)}function L(f){$.get(ie(f).url)}function M(f){$.get(le(f).url)}return(f,c)=>(m(),F(de,{breadcrumbs:S},{default:a(()=>[o(e(Y),{title:`${e(n)("vendors.vendor")} - ${l.vendor.name}`},null,8,["title"]),t("div",ue,[t("div",_e,[t("div",ve,[o(e(k),{variant:"outline",size:"icon",onClick:T},{default:a(()=>[o(e(re),{class:"size-4"})]),_:1}),o(J,{title:l.vendor.name,description:e(n)("vendors.vendor_details")},null,8,["title","description"])]),t("div",fe,[o(e(j),{active:l.vendor.is_active},null,8,["active"]),e(N)("vendors")?(m(),F(e(k),{key:0,onClick:P},{default:a(()=>[o(e(ce),{class:"mr-2 size-4"}),u(" "+s(e(n)("common.edit")),1)]),_:1})):v("",!0)])]),t("div",pe,[o(e(g),null,{default:a(()=>[o(e(h),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(oe),{class:"size-5"}),u(" "+s(e(n)("vendors.vendor_info")),1)]),_:1})]),_:1}),o(e(b),{class:"space-y-4"},{default:a(()=>[t("div",xe,[t("div",null,[t("p",ge,s(e(n)("vendors.code")),1),t("p",he,s(l.vendor.code),1)]),t("div",null,[t("p",ye,s(e(n)("vendors.name")),1),t("p",be,s(l.vendor.name),1)]),t("div",ke,[t("p",Ve,s(e(n)("vendors.address")),1),t("p",$e,s(l.vendor.address||"-"),1)]),t("div",null,[t("p",Ce,s(e(n)("vendors.contact_person")),1),t("p",je,s(l.vendor.contact_person||"-"),1)]),t("div",null,[t("p",we,s(e(n)("vendors.phone")),1),t("p",ze,s(l.vendor.phone||"-"),1)]),t("div",null,[t("p",Fe,s(e(n)("vendors.email")),1),t("p",Ue,s(l.vendor.email||"-"),1)]),t("div",null,[t("p",De,s(e(n)("vendors.tax_id")),1),t("p",Be,s(l.vendor.tax_id||"-"),1)])])]),_:1})]),_:1}),o(e(g),null,{default:a(()=>[o(e(h),null,{default:a(()=>[o(e(y),null,{default:a(()=>[u(s(e(n)("common.statistics")),1)]),_:1})]),_:1}),o(e(b),null,{default:a(()=>[t("div",Ie,[t("div",Ne,[t("p",Se,s(l.vendor.contracts?.length||0),1),t("p",Te,s(e(n)("nav.contracts")),1)]),t("div",Pe,[t("p",Ae,s(l.vendor.tickets?.length||0),1),t("p",Ee,s(e(n)("nav.tickets")),1)])])]),_:1})]),_:1})]),o(e(g),null,{default:a(()=>[o(e(h),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(V),{class:"size-5"}),u(" "+s(e(n)("vendors.related_contracts"))+" ",1),o(e(C),{variant:"secondary"},{default:a(()=>[u(s(l.vendor.contracts?.length||0),1)]),_:1})]),_:1})]),_:1}),o(e(b),null,{default:a(()=>[l.vendor.contracts?.length?(m(),_("div",Le,[(m(!0),_(U,null,D(l.vendor.contracts,i=>(m(),_("div",{key:i.id,class:"flex cursor-pointer items-center justify-between py-4 transition-colors hover:bg-muted/50",onClick:O=>L(i.id)},[t("div",Oe,[t("div",null,[t("p",qe,s(i.number),1),t("p",Re,[o(e(I),{class:"mr-1 inline size-3"}),u(" "+s(e(w)(i.date)),1)])])]),t("div",We,[t("span",Ye,s(E(i.amount)),1),o(e(C),{variant:i.cooperation_type==="progress"?"default":"secondary"},{default:a(()=>[u(s(e(n)(`contracts.cooperation_types.${i.cooperation_type}`)),1)]),_:2},1032,["variant"]),o(e(j),{active:i.is_active},null,8,["active"])])],8,Me))),128))])):(m(),_("div",Ge,[o(e(V),{class:"mx-auto mb-2 size-8 opacity-50"}),t("p",null,s(e(n)("vendors.no_contracts")),1)]))]),_:1})]),_:1}),o(e(g),null,{default:a(()=>[o(e(h),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(V),{class:"size-5"}),u(" "+s(e(n)("vendors.related_tickets"))+" ",1),o(e(C),{variant:"secondary"},{default:a(()=>[u(s(l.vendor.tickets?.length||0),1)]),_:1})]),_:1})]),_:1}),o(e(b),null,{default:a(()=>[l.vendor.tickets?.length?(m(),_("div",He,[(m(!0),_(U,null,D(l.vendor.tickets.slice(0,10),i=>(m(),_("div",{key:i.id,class:"flex cursor-pointer items-center justify-between py-4 transition-colors hover:bg-muted/50",onClick:O=>M(i.id)},[t("div",Ke,[t("div",null,[t("p",Qe,s(i.number),1),t("p",Xe,[o(e(I),{class:"mr-1 inline size-3"}),u(" "+s(e(w)(i.date)),1)])])]),o(e(j),{active:i.status==="complete","active-text":e(n)("tickets.status_types.complete"),"inactive-text":e(n)("tickets.status_types.incomplete")},null,8,["active","active-text","inactive-text"])],8,Je))),128))])):(m(),_("div",Ze,[o(e(V),{class:"mx-auto mb-2 size-8 opacity-50"}),t("p",null,s(e(n)("vendors.no_tickets")),1)]))]),_:1})]),_:1}),o(e(K),{open:x.value,"onUpdate:open":c[7]||(c[7]=i=>x.value=i)},{default:a(()=>[o(e(Q),{class:"sm:max-w-[500px]"},{default:a(()=>[o(e(X),null,{default:a(()=>[o(e(Z),null,{default:a(()=>[u(s(e(n)("vendors.edit")),1)]),_:1}),o(e(ee),null,{default:a(()=>[u(s(e(n)("vendors.edit_description")),1)]),_:1})]),_:1}),t("form",{onSubmit:G(A,["prevent"]),class:"space-y-4"},[t("div",et,[t("div",tt,[t("div",st,[t("label",ot,s(e(n)("vendors.code")),1),o(e(p),{modelValue:e(d).code,"onUpdate:modelValue":c[0]||(c[0]=i=>e(d).code=i),disabled:e(d).processing},null,8,["modelValue","disabled"]),e(d).errors.code?(m(),_("p",dt,s(e(d).errors.code),1)):v("",!0)]),t("div",nt,[t("label",at,s(e(n)("vendors.join_date")),1),o(e(p),{modelValue:e(d).join_date,"onUpdate:modelValue":c[1]||(c[1]=i=>e(d).join_date=i),type:"date",disabled:e(d).processing},null,8,["modelValue","disabled"]),e(d).errors.join_date?(m(),_("p",it,s(e(d).errors.join_date),1)):v("",!0)])]),t("div",lt,[t("label",rt,s(e(n)("vendors.name")),1),o(e(p),{modelValue:e(d).name,"onUpdate:modelValue":c[2]||(c[2]=i=>e(d).name=i),disabled:e(d).processing},null,8,["modelValue","disabled"]),e(d).errors.name?(m(),_("p",ct,s(e(d).errors.name),1)):v("",!0)]),t("div",mt,[t("label",ut,s(e(n)("vendors.address")),1),o(e(p),{modelValue:e(d).address,"onUpdate:modelValue":c[3]||(c[3]=i=>e(d).address=i),disabled:e(d).processing},null,8,["modelValue","disabled"]),e(d).errors.address?(m(),_("p",_t,s(e(d).errors.address),1)):v("",!0)]),t("div",vt,[t("div",ft,[t("label",pt,s(e(n)("vendors.contact_person")),1),o(e(p),{modelValue:e(d).contact_person,"onUpdate:modelValue":c[4]||(c[4]=i=>e(d).contact_person=i),disabled:e(d).processing},null,8,["modelValue","disabled"]),e(d).errors.contact_person?(m(),_("p",xt,s(e(d).errors.contact_person),1)):v("",!0)]),t("div",gt,[t("label",ht,s(e(n)("vendors.tax_id")),1),o(e(p),{modelValue:e(d).tax_id,"onUpdate:modelValue":c[5]||(c[5]=i=>e(d).tax_id=i),disabled:e(d).processing},null,8,["modelValue","disabled"]),e(d).errors.tax_id?(m(),_("p",yt,s(e(d).errors.tax_id),1)):v("",!0)])])]),o(e(te),null,{default:a(()=>[o(e(k),{type:"button",variant:"outline",onClick:c[6]||(c[6]=i=>x.value=!1),disabled:e(d).processing},{default:a(()=>[u(s(e(n)("common.cancel")),1)]),_:1},8,["disabled"]),o(e(k),{type:"submit",disabled:e(d).processing},{default:a(()=>[u(s(e(d).processing?e(n)("common.saving"):e(n)("common.save")),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),o(e(g),null,{default:a(()=>[o(e(h),null,{default:a(()=>[o(e(y),{class:"flex items-center gap-2"},{default:a(()=>[o(e(me),{class:"size-5"}),u(" "+s(e(n)("common.audit_info")),1)]),_:1})]),_:1}),o(e(b),null,{default:a(()=>[t("div",bt,[t("div",null,[t("p",kt,s(e(n)("common.created_by")),1),t("p",Vt,s(l.vendor.created_by?.name||"-"),1)]),t("div",null,[t("p",$t,s(e(n)("common.created_at")),1),t("p",Ct,s(e(z)(l.vendor.created_at)),1)]),t("div",null,[t("p",jt,s(e(n)("common.updated_by")),1),t("p",wt,s(l.vendor.updated_by?.name||"-"),1)]),t("div",null,[t("p",zt,s(e(n)("common.updated_at")),1),t("p",Ft,s(e(z)(l.vendor.updated_at)),1)])])]),_:1})]),_:1})])]),_:1}))}});export{Qt as default};
