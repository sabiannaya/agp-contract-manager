import{d as q,u as A,q as y,w as E,c as d,b as o,e as t,f as e,h as R,g as n,k as f,y as S,j as _,t as i,m as v,s as h}from"./app-Az55F6M8.js";import{_ as F,u as L}from"./useActionConfirmation-BPstB5Uy.js";import{_ as M}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as C}from"./index-BLT0FxeU.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{S as G,_ as H}from"./DataTable.vue_vue_type_script_setup_true_lang-KlVNUek7.js";import{o as g,r as J,c as K,d as O,e as Q,f as z,t as W,U as X,S as Y,_ as Z,g as ee,v as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-9NyD3cCB.js";import{E as oe,_ as ae}from"./Pagination.vue_vue_type_script_setup_true_lang-DOeNEDps.js";import{_ as re}from"./StatusBadge.vue_vue_type_script_setup_true_lang-Ik7GkR5h.js";import{P as le}from"./plus-Rxuc06gk.js";import{P as ne}from"./pencil-B0Lx0GLH.js";import{T as ie}from"./trash-2-1tc8fb7c.js";import{u as ce}from"./index-Dwg1ok0u.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D7dEZzdR.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CpvOfIA5.js";import"./createLucideIcon-iLJQO7DH.js";import"./Spinner.vue_vue_type_script_setup_true_lang-MOyKrSw-.js";import"./chevron-down-DzsoBm0Z.js";import"./VisuallyHidden-C4XAoWlX.js";import"./useForwardExpose-Dz4tKeCh.js";import"./index-BDqSilVs.js";const me={class:"flex flex-col gap-6 p-6"},ue={class:"flex items-center justify-between"},de={class:"flex items-center gap-4"},fe={class:"relative flex-1 max-w-sm"},_e={class:"overflow-auto"},pe={class:"flex items-center gap-2"},ve={class:"font-medium"},he={class:"flex items-center justify-center gap-1"},xe={class:"sr-only"},ge={class:"shrink-0 border-t bg-background pt-4"},Me=q({__name:"Index",props:{roles:{},filters:{}},setup(c){const u=c,{t:s}=A(),{canCreate:V,canUpdate:w,canDelete:N}=ee(),l=L(),T=[{title:s("nav.roles"),href:g().url}],x=y(u.filters.search??""),D=ce(r=>{h.get(g().url,{...u.filters,search:r||void 0,page:1},{preserveState:!0,preserveScroll:!0})},300);E(x,r=>D(r));function P(r,m){h.get(g().url,{...u.filters,sort:r,direction:m},{preserveState:!0,preserveScroll:!0})}function U(r){h.get(r,{},{preserveState:!0,preserveScroll:!0})}const I=[{key:"name",label:s("roles.name"),sortable:!0},{key:"description",label:s("roles.description")},{key:"permissions_count",label:s("roles.permissions"),class:"text-center"},{key:"users_count",label:s("roles.users"),class:"text-center"},{key:"is_active",label:s("common.status"),sortable:!0},{key:"actions",label:"",class:"w-[70px]"}],p=y(null);function j(r){p.value=r,l.requestConfirmation({title:s("common.confirm_delete"),description:s("roles.delete_confirmation",{name:r.name}),confirmText:s("common.delete"),destructive:!0,details:[{label:s("roles.name"),value:r.name}]},B)}function B(){p.value&&h.delete(te(p.value.id).url,{onSuccess:()=>{p.value=null}})}function b(r){return r.name.toLowerCase()==="admin"}return(r,m)=>(f(),d(Z,{breadcrumbs:T},{default:o(()=>[t(e(R),{title:e(s)("nav.roles")},null,8,["title"]),n("div",me,[n("div",ue,[t(M,{title:e(s)("nav.roles"),description:e(s)("roles.description")},null,8,["title","description"]),e(V)("role_groups")?(f(),d(e(S),{key:0,href:e(J)().url},{default:o(()=>[t(e($),null,{default:o(()=>[t(e(le),{class:"mr-2 size-4"}),_(" "+i(e(s)("roles.create")),1)]),_:1})]),_:1},8,["href"])):v("",!0)]),n("div",de,[n("div",fe,[t(e(G),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),t(e(se),{modelValue:x.value,"onUpdate:modelValue":m[0]||(m[0]=a=>x.value=a),placeholder:e(s)("common.search"),class:"pl-9"},null,8,["modelValue","placeholder"])])]),n("div",_e,[t(e(H),{columns:I,data:c.roles.data,"sort-field":u.filters.sort,"sort-direction":u.filters.direction,"empty-text":e(s)("common.no_data"),hoverable:"",onSort:P},{"cell-name":o(({row:a,value:k})=>[n("div",pe,[t(e(Y),{class:"size-4 text-muted-foreground"}),n("span",ve,i(k),1),b(a)?(f(),d(e(C),{key:0,variant:"outline"},{default:o(()=>[_(i(e(s)("roles.system")),1)]),_:1})):v("",!0)])]),"cell-permissions_count":o(({value:a})=>[t(e(C),{variant:"secondary"},{default:o(()=>[_(i(a),1)]),_:2},1024)]),"cell-users_count":o(({value:a})=>[n("div",he,[t(e(X),{class:"size-4 text-muted-foreground"}),n("span",null,i(a),1)])]),"cell-is_active":o(({value:a})=>[t(e(re),{status:a?"active":"inactive"},null,8,["status"])]),"cell-actions":o(({row:a})=>[t(e(K),null,{default:o(()=>[t(e(O),{"as-child":""},{default:o(()=>[t(e($),{variant:"ghost",size:"icon",class:"size-8"},{default:o(()=>[t(e(oe),{class:"size-4"}),n("span",xe,i(e(s)("common.actions")),1)]),_:1})]),_:1}),t(e(Q),{align:"end"},{default:o(()=>[e(w)("role_groups")?(f(),d(e(z),{key:0,"as-child":""},{default:o(()=>[t(e(S),{href:e(W)(a).url,class:"flex items-center"},{default:o(()=>[t(e(ne),{class:"mr-2 size-4"}),_(" "+i(e(s)("common.edit")),1)]),_:1},8,["href"])]),_:2},1024)):v("",!0),e(N)("role_groups")&&!b(a)?(f(),d(e(z),{key:1,class:"text-destructive focus:text-destructive",onClick:k=>j(a)},{default:o(()=>[t(e(ie),{class:"mr-2 size-4"}),_(" "+i(e(s)("common.delete")),1)]),_:1},8,["onClick"])):v("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","sort-field","sort-direction","empty-text"])]),n("div",ge,[t(e(ae),{links:c.roles.links,from:c.roles.from,to:c.roles.to,total:c.roles.total,onNavigate:U},null,8,["links","from","to","total"])])]),t(F,{open:e(l).open,"onUpdate:open":m[1]||(m[1]=a=>e(l).open=a),title:e(l).title,description:e(l).description,"confirm-text":e(l).confirmText,"cancel-text":e(l).cancelText,destructive:e(l).destructive,details:e(l).details,onConfirm:e(l).confirm,onCancel:e(l).cancel},null,8,["open","title","description","confirm-text","cancel-text","destructive","details","onConfirm","onCancel"])]),_:1}))}});export{Me as default};
