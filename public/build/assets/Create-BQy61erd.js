import{d as z,u as q,a as L,c as D,b as a,e as t,f as e,h as E,g as r,y,i as M,j as n,t as l,k as _,l as v,m as b,F as G,r as H,p as J,s as K}from"./app-Az55F6M8.js";import{_ as O,u as Q}from"./useActionConfirmation-BPstB5Uy.js";import{_ as R}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as k}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{_ as U,a as C,b as V,c as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-DL5VZqU4.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-xuWwyfVh.js";import{_ as u}from"./Checkbox.vue_vue_type_script_setup_true_lang-pmgtftpc.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-9NyD3cCB.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-BatJIAlb.js";import{_ as X}from"./Textarea.vue_vue_type_script_setup_true_lang-DKZzY7Db.js";import{o as g,_ as Y,p as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{A as ee}from"./arrow-left-DLIy3lRN.js";import{S as se}from"./save-CpSwRFrC.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D7dEZzdR.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./index-Dwg1ok0u.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CpvOfIA5.js";import"./VisuallyHidden-C4XAoWlX.js";import"./VisuallyHiddenInput-dytHPRwB.js";import"./useForwardExpose-Dz4tKeCh.js";import"./check-CBSXup_1.js";import"./createLucideIcon-iLJQO7DH.js";import"./index-BDqSilVs.js";const te={class:"p-6"},ie={class:"flex items-center gap-4"},de={class:"grid gap-4 sm:grid-cols-2"},oe={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},re={class:"flex items-center space-x-2 pt-6"},le={class:"space-y-2"},ce={key:0,class:"text-sm text-destructive"},ne={class:"grid grid-cols-2 gap-4 space-y-4"},me={class:"mb-3 flex items-center justify-between"},fe={class:"font-medium"},pe={class:"text-sm text-muted-foreground"},_e={class:"flex items-center gap-2"},ue={class:"text-xs text-muted-foreground"},ve={class:"flex flex-wrap gap-4"},he={class:"flex items-center space-x-2"},xe={class:"flex items-center space-x-2"},ge={class:"flex items-center space-x-2"},be={class:"flex items-center space-x-2"},ke={key:0,class:"mt-2 text-sm text-destructive"},$e={class:"flex items-center justify-end gap-4"},Ke=z({__name:"Create",props:{pages:{}},setup($){const F=$,{t:d}=q(),m=Q(),A=J(()=>[{title:d("nav.roles"),href:g().url},{title:d("roles.create"),href:"#"}]),B=F.pages.map(f=>({page_id:f.id,create:!1,read:!1,update:!1,delete:!1})),i=L({name:"",description:"",is_active:!0,privileges:B});function I(){i.post(Z().url,{onSuccess:()=>{K.visit(g().url)}})}function N(){m.requestConfirmation({title:d("common.create"),description:d("roles.create_description"),confirmText:d("common.save"),details:[{label:d("roles.name"),value:i.name||"-"}]},I)}function P(f,o){const s=i.privileges.findIndex(c=>c.page_id===f);s!==-1&&(i.privileges[s].create=o,i.privileges[s].read=o,i.privileges[s].update=o,i.privileges[s].delete=o)}function h(f){return i.privileges.find(o=>o.page_id===f)}function x(f,o,s){const c=i.privileges.findIndex(j=>j.page_id===f);c!==-1&&(i.privileges[c][o]=s)}function T(f){const o=i.privileges.find(s=>s.page_id===f);return o?o.create&&o.read&&o.update&&o.delete:!1}return(f,o)=>(_(),D(Y,{breadcrumbs:A.value},{default:a(()=>[t(e(E),{title:e(d)("roles.create")},null,8,["title"]),r("div",te,[r("div",ie,[t(e(y),{href:e(g)().url},{default:a(()=>[t(e(k),{variant:"ghost",size:"icon"},{default:a(()=>[t(e(ee),{class:"size-4"})]),_:1})]),_:1},8,["href"]),t(R,{title:e(d)("roles.create"),description:e(d)("roles.create_description")},null,8,["title","description"])]),r("form",{onSubmit:M(N,["prevent"]),class:"space-y-6"},[t(e(U),null,{default:a(()=>[t(e(C),null,{default:a(()=>[t(e(V),null,{default:a(()=>[n(l(e(d)("roles.basic_info")),1)]),_:1}),t(e(w),null,{default:a(()=>[n(l(e(d)("roles.basic_info_description")),1)]),_:1})]),_:1}),t(e(S),{class:"space-y-4"},{default:a(()=>[r("div",de,[r("div",oe,[t(e(p),{for:"name"},{default:a(()=>[n(l(e(d)("roles.name")),1)]),_:1}),t(e(W),{id:"name",modelValue:e(i).name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(i).name=s),disabled:e(i).processing,required:""},null,8,["modelValue","disabled"]),e(i).errors.name?(_(),v("p",ae,l(e(i).errors.name),1)):b("",!0)]),r("div",re,[t(e(u),{id:"is_active",checked:e(i).is_active,"onUpdate:checked":o[1]||(o[1]=s=>e(i).is_active=s),disabled:e(i).processing},null,8,["checked","disabled"]),t(e(p),{for:"is_active",class:"font-normal"},{default:a(()=>[n(l(e(d)("roles.is_active")),1)]),_:1})])]),r("div",le,[t(e(p),{for:"description"},{default:a(()=>[n(l(e(d)("roles.description_field")),1)]),_:1}),t(e(X),{id:"description",modelValue:e(i).description,"onUpdate:modelValue":o[2]||(o[2]=s=>e(i).description=s),disabled:e(i).processing,rows:2},null,8,["modelValue","disabled"]),e(i).errors.description?(_(),v("p",ce,l(e(i).errors.description),1)):b("",!0)])]),_:1})]),_:1}),t(e(U),null,{default:a(()=>[t(e(C),null,{default:a(()=>[t(e(V),null,{default:a(()=>[n(l(e(d)("roles.page_privileges")),1)]),_:1}),t(e(w),null,{default:a(()=>[n(l(e(d)("roles.page_privileges_description")),1)]),_:1})]),_:1}),t(e(S),null,{default:a(()=>[r("div",ne,[(_(!0),v(G,null,H($.pages,s=>(_(),v("div",{key:s.id,class:"rounded-lg border p-4"},[r("div",me,[r("div",null,[r("h4",fe,l(s.name),1),r("p",pe,l(s.description),1)]),r("div",_e,[t(e(u),{checked:T(s.id),"onUpdate:checked":c=>P(s.id,c),disabled:e(i).processing},null,8,["checked","onUpdate:checked","disabled"]),r("span",ue,l(e(d)("common.select_all")),1)])]),r("div",ve,[r("div",he,[t(e(u),{id:`${s.id}-create`,checked:h(s.id)?.create??!1,"onUpdate:checked":c=>x(s.id,"create",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(p),{for:`${s.id}-create`,class:"text-sm font-normal"},{default:a(()=>[n(l(e(d)("common.create")),1)]),_:1},8,["for"])]),r("div",xe,[t(e(u),{id:`${s.id}-read`,checked:h(s.id)?.read??!1,"onUpdate:checked":c=>x(s.id,"read",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(p),{for:`${s.id}-read`,class:"text-sm font-normal"},{default:a(()=>[n(l(e(d)("common.read")),1)]),_:1},8,["for"])]),r("div",ge,[t(e(u),{id:`${s.id}-update`,checked:h(s.id)?.update??!1,"onUpdate:checked":c=>x(s.id,"update",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(p),{for:`${s.id}-update`,class:"text-sm font-normal"},{default:a(()=>[n(l(e(d)("common.update")),1)]),_:1},8,["for"])]),r("div",be,[t(e(u),{id:`${s.id}-delete`,checked:h(s.id)?.delete??!1,"onUpdate:checked":c=>x(s.id,"delete",c),disabled:e(i).processing},null,8,["id","checked","onUpdate:checked","disabled"]),t(e(p),{for:`${s.id}-delete`,class:"text-sm font-normal"},{default:a(()=>[n(l(e(d)("common.delete")),1)]),_:1},8,["for"])])])]))),128))]),e(i).errors.privileges?(_(),v("p",ke,l(e(i).errors.privileges),1)):b("",!0)]),_:1})]),_:1}),r("div",$e,[t(e(y),{href:e(g)().url},{default:a(()=>[t(e(k),{type:"button",variant:"outline",disabled:e(i).processing},{default:a(()=>[n(l(e(d)("common.cancel")),1)]),_:1},8,["disabled"])]),_:1},8,["href"]),t(e(k),{type:"submit",disabled:e(i).processing},{default:a(()=>[t(e(se),{class:"mr-2 size-4"}),n(" "+l(e(i).processing?e(d)("common.saving"):e(d)("common.save")),1)]),_:1},8,["disabled"])])],32),t(O,{open:e(m).open,"onUpdate:open":o[3]||(o[3]=s=>e(m).open=s),title:e(m).title,description:e(m).description,"confirm-text":e(m).confirmText,"cancel-text":e(m).cancelText,destructive:e(m).destructive,details:e(m).details,onConfirm:e(m).confirm,onCancel:e(m).cancel},null,8,["open","title","description","confirm-text","cancel-text","destructive","details","onConfirm","onCancel"])])]),_:1},8,["breadcrumbs"]))}});export{Ke as default};
