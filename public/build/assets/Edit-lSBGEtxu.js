import{d as w,u as A,a as B,c as N,b as t,e as s,f as e,h as T,g as n,y as v,t as l,i as V,j as f,k as m,l as p,F as j,r as I,n as E,m as x,p as y}from"./app-Az55F6M8.js";import{_ as L,u as q}from"./useActionConfirmation-BPstB5Uy.js";import{_ as D}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as g}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{_ as $,a as k,b as C,c as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-DL5VZqU4.js";import{_ as M}from"./CardDescription.vue_vue_type_script_setup_true_lang-xuWwyfVh.js";import{_ as O}from"./Checkbox.vue_vue_type_script_setup_true_lang-pmgtftpc.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang-BatJIAlb.js";import{I as h,S as H,_ as K,J as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{A as Q}from"./arrow-left-DLIy3lRN.js";import{U as W}from"./user-DuKwlFf0.js";import{S as X}from"./save-CpSwRFrC.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D7dEZzdR.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./index-Dwg1ok0u.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CpvOfIA5.js";import"./VisuallyHidden-C4XAoWlX.js";import"./VisuallyHiddenInput-dytHPRwB.js";import"./useForwardExpose-Dz4tKeCh.js";import"./check-CBSXup_1.js";import"./createLucideIcon-iLJQO7DH.js";import"./index-BDqSilVs.js";const Y={class:"max-w-2xl space-y-6"},Z={class:"flex items-center gap-4"},ee={class:"flex size-10 items-center justify-center rounded-full bg-muted"},se={class:"text-sm font-normal text-muted-foreground"},te={class:"space-y-3"},re={class:"flex-1 space-y-1"},ie={key:0,class:"text-sm text-muted-foreground"},oe={key:0,class:"text-center text-muted-foreground py-4"},ae={key:0,class:"mt-2 text-sm text-destructive"},ne={class:"flex items-center justify-end gap-4"},Ae=w({__name:"Edit",props:{user:{},roles:{}},setup(d){const _=d,{t:r}=A(),o=q(),S=y(()=>[{title:r("nav.users"),href:h().url},{title:_.user.name,href:"#"}]),z=y(()=>_.user.roles?.map(c=>c.id)??[]),i=B({roles:z.value});function U(c){const u=i.roles.indexOf(c);u===-1?i.roles.push(c):i.roles.splice(u,1)}function b(c){return i.roles.includes(c)}function F(){i.put(P(_.user).url)}function R(){o.requestConfirmation({title:r("common.update"),description:r("users.edit_roles_description"),confirmText:r("common.save"),details:[{label:"User",value:_.user.name},{label:"Assigned Roles",value:String(i.roles.length)}]},F)}return(c,u)=>(m(),N(K,{breadcrumbs:S.value},{default:t(()=>[s(e(T),{title:`${e(r)("users.edit_roles")} - ${d.user.name}`},null,8,["title"]),n("div",Y,[n("div",Z,[s(e(v),{href:e(h)().url},{default:t(()=>[s(e(g),{variant:"ghost",size:"icon"},{default:t(()=>[s(e(Q),{class:"size-4"})]),_:1})]),_:1},8,["href"]),s(D,{title:e(r)("users.edit_roles"),description:e(r)("users.edit_roles_description")},null,8,["title","description"])]),s(e($),null,{default:t(()=>[s(e(k),null,{default:t(()=>[s(e(C),{class:"flex items-center gap-3"},{default:t(()=>[n("div",ee,[s(e(W),{class:"size-5 text-muted-foreground"})]),n("div",null,[n("p",null,l(d.user.name),1),n("p",se,l(d.user.email),1)])]),_:1})]),_:1})]),_:1}),n("form",{onSubmit:V(R,["prevent"]),class:"space-y-6"},[s(e($),null,{default:t(()=>[s(e(k),null,{default:t(()=>[s(e(C),null,{default:t(()=>[f(l(e(r)("users.assign_roles")),1)]),_:1}),s(e(M),null,{default:t(()=>[f(l(e(r)("users.assign_roles_description")),1)]),_:1})]),_:1}),s(e(J),null,{default:t(()=>[n("div",te,[(m(!0),p(j,null,I(d.roles,a=>(m(),p("div",{key:a.id,class:E(["flex items-start gap-3 rounded-lg border p-4 transition-colors",b(a.id)?"border-primary bg-primary/5":"hover:bg-muted/50"])},[s(e(O),{id:`role-${a.id}`,checked:b(a.id),"onUpdate:checked":le=>U(a.id),disabled:e(i).processing,class:"mt-1"},null,8,["id","checked","onUpdate:checked","disabled"]),n("div",re,[s(e(G),{for:`role-${a.id}`,class:"flex items-center gap-2 font-medium cursor-pointer"},{default:t(()=>[s(e(H),{class:"size-4 text-muted-foreground"}),f(" "+l(a.name),1)]),_:2},1032,["for"]),a.description?(m(),p("p",ie,l(a.description),1)):x("",!0)])],2))),128)),d.roles.length===0?(m(),p("p",oe,l(e(r)("users.no_roles_available")),1)):x("",!0)]),e(i).errors.roles?(m(),p("p",ae,l(e(i).errors.roles),1)):x("",!0)]),_:1})]),_:1}),n("div",ne,[s(e(v),{href:e(h)().url},{default:t(()=>[s(e(g),{type:"button",variant:"outline",disabled:e(i).processing},{default:t(()=>[f(l(e(r)("common.cancel")),1)]),_:1},8,["disabled"])]),_:1},8,["href"]),s(e(g),{type:"submit",disabled:e(i).processing},{default:t(()=>[s(e(X),{class:"mr-2 size-4"}),f(" "+l(e(i).processing?e(r)("common.saving"):e(r)("common.save")),1)]),_:1},8,["disabled"])])],32),s(L,{open:e(o).open,"onUpdate:open":u[0]||(u[0]=a=>e(o).open=a),title:e(o).title,description:e(o).description,"confirm-text":e(o).confirmText,"cancel-text":e(o).cancelText,destructive:e(o).destructive,details:e(o).details,onConfirm:e(o).confirm,onCancel:e(o).cancel},null,8,["open","title","description","confirm-text","cancel-text","destructive","details","onConfirm","onCancel"])])]),_:1},8,["breadcrumbs"]))}});export{Ae as default};
