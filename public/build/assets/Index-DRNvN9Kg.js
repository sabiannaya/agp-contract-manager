import{d as D,u as F,q as I,w as V,c as z,b as o,e as s,f as e,h as N,g as l,j as u,t as m,k,l as B,F as j,r as E,s as d}from"./app-Az55F6M8.js";import{_ as T}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as q}from"./index-BLT0FxeU.js";import{_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{S as L,_ as O}from"./DataTable.vue_vue_type_script_setup_true_lang-KlVNUek7.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-9NyD3cCB.js";import{_ as U}from"./Pagination.vue_vue_type_script_setup_true_lang-DOeNEDps.js";import{u as A}from"./useDateFormat-BThD_v7S.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{E as H}from"./eye-CfgMQgEh.js";import{u as J}from"./index-Dwg1ok0u.js";import"./createLucideIcon-iLJQO7DH.js";import"./Spinner.vue_vue_type_script_setup_true_lang-MOyKrSw-.js";import"./chevron-down-DzsoBm0Z.js";import"./VisuallyHidden-C4XAoWlX.js";import"./useForwardExpose-Dz4tKeCh.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./index-BDqSilVs.js";const K={class:"flex flex-col gap-6 p-6"},M={class:"flex flex-wrap items-center gap-4"},P={class:"relative flex-1 max-w-sm"},Q={class:"flex gap-2"},W={class:"overflow-auto"},X={class:"sr-only"},Y={class:"shrink-0 border-t bg-background pt-4"},_e=D({__name:"Index",props:{tickets:{},filters:{}},setup(n){const i=n,{t:a}=F(),{formatDateOnly:_}=A(),y=[{title:a("nav.payment_tracker"),href:"/payment-tracker"}],p=I(i.filters.search??""),b=J(t=>{d.get("/payment-tracker",{...i.filters,search:t||void 0,page:1},{preserveState:!0,preserveScroll:!0})},300);V(p,t=>b(t));function g(t,c){d.get("/payment-tracker",{...i.filters,sort:t,direction:c},{preserveState:!0,preserveScroll:!0})}function h(t){d.get(t,{},{preserveState:!0,preserveScroll:!0})}function x(t){return t==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function S(t){switch(t){case"paid":return"default";case"approved":return"default";case"pending":return"secondary";case"rejected":return"destructive";default:return"outline"}}function $(t){d.get(`/payment-tracker/${t.id}`)}const w=[{key:"number",label:a("tickets.number"),sortable:!0},{key:"date",label:a("tickets.date"),sortable:!0},{key:"contract.number",label:a("tickets.contract")},{key:"vendor.name",label:a("tickets.vendor")},{key:"amount",label:a("payment_tracker.amount"),sortable:!0,class:"text-right"},{key:"approval_status",label:a("payment_tracker.approval_status"),sortable:!0},{key:"actions",label:"",class:"w-[70px]"}];function v(t){d.get("/payment-tracker",{...i.filters,approval_status:t||void 0,page:1},{preserveState:!0,preserveScroll:!0})}return(t,c)=>(k(),z(G,{breadcrumbs:y},{default:o(()=>[s(e(N),{title:e(a)("nav.payment_tracker")},null,8,["title"]),l("div",K,[s(T,{title:e(a)("nav.payment_tracker"),description:e(a)("payment_tracker.description")},null,8,["title","description"]),l("div",M,[l("div",P,[s(e(L),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),s(e(R),{modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=r=>p.value=r),placeholder:e(a)("common.search"),class:"pl-9"},null,8,["modelValue","placeholder"])]),l("div",Q,[s(e(f),{size:"sm",variant:n.filters.approval_status?"outline":"default",onClick:c[1]||(c[1]=r=>v(void 0))},{default:o(()=>[u(m(e(a)("common.all")),1)]),_:1},8,["variant"]),(k(),B(j,null,E(["draft","pending","approved","rejected","paid"],r=>s(e(f),{key:r,size:"sm",variant:n.filters.approval_status===r?"default":"outline",onClick:C=>v(r)},{default:o(()=>[u(m(e(a)(`payment_tracker.statuses.${r}`)),1)]),_:2},1032,["variant","onClick"])),64))])]),l("div",W,[s(e(O),{columns:w,data:n.tickets.data,"sort-field":typeof i.filters.sort=="string"?i.filters.sort:void 0,"sort-direction":i.filters.direction,"empty-text":e(a)("common.no_data"),hoverable:"",onSort:g},{"cell-date":o(({value:r})=>[u(m(e(_)(r)),1)]),"cell-amount":o(({value:r})=>[u(m(x(r)),1)]),"cell-approval_status":o(({value:r})=>[s(e(q),{variant:S(r)},{default:o(()=>[u(m(e(a)(`payment_tracker.statuses.${r}`)),1)]),_:2},1032,["variant"])]),"cell-actions":o(({row:r})=>[s(e(f),{variant:"ghost",size:"icon",class:"size-8",onClick:C=>$(r)},{default:o(()=>[s(e(H),{class:"size-4"}),l("span",X,m(e(a)("common.view")),1)]),_:1},8,["onClick"])]),_:1},8,["data","sort-field","sort-direction","empty-text"])]),l("div",Y,[s(e(U),{links:n.tickets.links,from:n.tickets.from,to:n.tickets.to,total:n.tickets.total,onNavigate:h},null,8,["links","from","to","total"])])])]),_:1}))}});export{_e as default};
