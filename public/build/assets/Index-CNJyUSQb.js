import{d as K,u as L,r as h,w as Q,a as R,c as V,b as a,e as t,f as e,h as X,g as d,i as m,j as c,t as n,k as _,l as ee,m as x,q as y,s as se}from"./app-CuI7LdXL.js";import{_ as te}from"./Heading.vue_vue_type_script_setup_true_lang-BHjUqA3V.js";import{_ as g}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BUBYiqAX.js";import{S as oe,_ as ae}from"./DataTable.vue_vue_type_script_setup_true_lang-BKoDKxgg.js";import{_ as j,a as U,b as z,c as E,d as D}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C-SfElTY.js";import{_ as M}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bw_2LaqB.js";import{W as S,_ as le,a as ne,b as re,c as C,d as de,u as ie,A as ce,Y as ue,Z as me,$ as _e}from"./AppLayout.vue_vue_type_script_setup_true_lang-CwkbJi7E.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-DLaguvqt.js";import{E as fe,_ as pe}from"./Pagination.vue_vue_type_script_setup_true_lang-8C8Mf2Mc.js";import{_ as ve}from"./StatusBadge.vue_vue_type_script_setup_true_lang-MmS8OP8w.js";import{P as be}from"./plus-gEXAE-os.js";import{E as xe}from"./eye-CwGG716I.js";import{P as ge}from"./pencil-CZinZyQI.js";import{T as ke}from"./trash-2-C9QLNDK2.js";import{u as ye}from"./index-BRm__Hk1.js";import"./createLucideIcon-CX-op3lg.js";import"./Spinner.vue_vue_type_script_setup_true_lang-Br3sTUwP.js";import"./chevron-down-DGBHzGpy.js";import"./useForwardPropsEmits-CaKxx7wQ.js";import"./VisuallyHidden-DxCKGmrj.js";import"./useForwardExpose-D4WvoR71.js";import"./index-BDqSilVs.js";const he={class:"flex flex-col gap-6 p-6"},Ve={class:"flex items-center justify-between"},$e={class:"flex items-center gap-4"},Se={class:"relative flex-1 max-w-sm"},Ce={class:"overflow-auto"},we={class:"sr-only"},je={class:"shrink-0 border-t bg-background pt-4"},Ue={class:"grid gap-4"},ze={class:"grid grid-cols-2 gap-4"},Ee={class:"space-y-2"},De={class:"text-sm font-medium"},Me={key:0,class:"text-sm text-destructive"},Ne={class:"space-y-2"},Ie={class:"text-sm font-medium"},Pe={key:0,class:"text-sm text-destructive"},Te={class:"space-y-2"},Be={class:"text-sm font-medium"},Fe={key:0,class:"text-sm text-destructive"},Oe={class:"space-y-2"},qe={class:"text-sm font-medium"},Ae={key:0,class:"text-sm text-destructive"},We={class:"grid grid-cols-2 gap-4"},Ye={class:"space-y-2"},Ze={class:"text-sm font-medium"},Ge={key:0,class:"text-sm text-destructive"},He={class:"space-y-2"},Je={class:"text-sm font-medium"},Ke={key:0,class:"text-sm text-destructive"},xs=K({__name:"Index",props:{vendors:{},filters:{}},setup(v){const b=v,{t:o}=L(),{canCreate:N,canUpdate:I,canDelete:P}=ie(),T=[{title:o("nav.vendors"),href:S().url}],$=h(b.filters.search??""),B=ye(i=>{y.get(S().url,{...b.filters,search:i||void 0,page:1},{preserveState:!0,preserveScroll:!0})},300);Q($,i=>B(i));function F(i,r){y.get(S().url,{...b.filters,sort:i,direction:r},{preserveState:!0,preserveScroll:!0})}function O(i){y.get(i,{},{preserveState:!0,preserveScroll:!0})}const q=[{key:"code",label:o("vendors.code"),sortable:!0},{key:"name",label:o("vendors.name"),sortable:!0},{key:"address",label:o("vendors.address")},{key:"contact_person",label:o("vendors.contact_person")},{key:"tax_id",label:o("vendors.tax_id")},{key:"is_active",label:o("common.status"),sortable:!0},{key:"actions",label:"",class:"w-[70px]"}],f=h(!1),k=h(!1),u=h(null),s=R({code:"",name:"",address:"",join_date:new Date().toISOString().split("T")[0],contact_person:"",tax_id:"",is_active:!0}),A=se(()=>u.value?o("vendors.edit"):o("vendors.create"));function W(){u.value=null,s.reset(),s.clearErrors(),f.value=!0}function Y(i){y.get(ce(i.id).url)}function Z(i){u.value=i,s.code=i.code,s.name=i.name,s.address=i.address,s.join_date=i.join_date,s.contact_person=i.contact_person,s.tax_id=i.tax_id,s.is_active=i.is_active,s.clearErrors(),f.value=!0}function G(i){u.value=i,k.value=!0}function H(){u.value?s.put(ue(u.value.id).url,{onSuccess:()=>{f.value=!1}}):s.post(me().url,{onSuccess:()=>{f.value=!1}})}function J(){u.value&&y.delete(_e(u.value.id).url,{onSuccess:()=>{k.value=!1,u.value=null}})}return(i,r)=>(m(),V(de,{breadcrumbs:T},{default:a(()=>[t(e(X),{title:e(o)("nav.vendors")},null,8,["title"]),d("div",he,[d("div",Ve,[t(te,{title:e(o)("nav.vendors"),description:e(o)("vendors.description")},null,8,["title","description"]),e(N)("vendors")?(m(),V(e(g),{key:0,onClick:W},{default:a(()=>[t(e(be),{class:"mr-2 size-4"}),c(" "+n(e(o)("vendors.create")),1)]),_:1})):_("",!0)]),d("div",$e,[d("div",Se,[t(e(oe),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),t(e(p),{modelValue:$.value,"onUpdate:modelValue":r[0]||(r[0]=l=>$.value=l),placeholder:e(o)("common.search"),class:"pl-9"},null,8,["modelValue","placeholder"])])]),d("div",Ce,[t(e(ae),{columns:q,data:v.vendors.data,"sort-field":typeof b.filters.sort=="string"?b.filters.sort:void 0,"sort-direction":b.filters.direction,"empty-text":e(o)("common.no_data"),hoverable:"",onSort:F},{"cell-is_active":a(({value:l})=>[t(e(ve),{status:l?"active":"inactive"},null,8,["status"])]),"cell-actions":a(({row:l})=>[t(e(le),null,{default:a(()=>[t(e(ne),{"as-child":""},{default:a(()=>[t(e(g),{variant:"ghost",size:"icon",class:"size-8"},{default:a(()=>[t(e(fe),{class:"size-4"}),d("span",we,n(e(o)("common.actions")),1)]),_:1})]),_:1}),t(e(re),{align:"end"},{default:a(()=>[t(e(C),{onClick:w=>Y(l)},{default:a(()=>[t(e(xe),{class:"mr-2 size-4"}),c(" "+n(e(o)("common.view")),1)]),_:1},8,["onClick"]),e(I)("vendors")?(m(),V(e(C),{key:0,onClick:w=>Z(l)},{default:a(()=>[t(e(ge),{class:"mr-2 size-4"}),c(" "+n(e(o)("common.edit")),1)]),_:1},8,["onClick"])):_("",!0),e(P)("vendors")?(m(),V(e(C),{key:1,class:"text-destructive focus:text-destructive",onClick:w=>G(l)},{default:a(()=>[t(e(ke),{class:"mr-2 size-4"}),c(" "+n(e(o)("common.delete")),1)]),_:1},8,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","sort-field","sort-direction","empty-text"])]),d("div",je,[t(e(pe),{links:v.vendors.links,from:v.vendors.from,to:v.vendors.to,total:v.vendors.total,onNavigate:O},null,8,["links","from","to","total"])])]),t(e(j),{open:f.value,"onUpdate:open":r[8]||(r[8]=l=>f.value=l)},{default:a(()=>[t(e(U),{class:"sm:max-w-[500px]"},{default:a(()=>[t(e(z),null,{default:a(()=>[t(e(E),null,{default:a(()=>[c(n(A.value),1)]),_:1}),t(e(D),null,{default:a(()=>[c(n(u.value?e(o)("vendors.edit_description"):e(o)("vendors.create_description")),1)]),_:1})]),_:1}),d("form",{onSubmit:ee(H,["prevent"]),class:"space-y-4"},[d("div",Ue,[d("div",ze,[d("div",Ee,[d("label",De,n(e(o)("vendors.code")),1),t(e(p),{modelValue:e(s).code,"onUpdate:modelValue":r[1]||(r[1]=l=>e(s).code=l),disabled:e(s).processing},null,8,["modelValue","disabled"]),e(s).errors.code?(m(),x("p",Me,n(e(s).errors.code),1)):_("",!0)]),d("div",Ne,[d("label",Ie,n(e(o)("vendors.join_date")),1),t(e(p),{modelValue:e(s).join_date,"onUpdate:modelValue":r[2]||(r[2]=l=>e(s).join_date=l),type:"date",disabled:e(s).processing},null,8,["modelValue","disabled"]),e(s).errors.join_date?(m(),x("p",Pe,n(e(s).errors.join_date),1)):_("",!0)])]),d("div",Te,[d("label",Be,n(e(o)("vendors.name")),1),t(e(p),{modelValue:e(s).name,"onUpdate:modelValue":r[3]||(r[3]=l=>e(s).name=l),disabled:e(s).processing},null,8,["modelValue","disabled"]),e(s).errors.name?(m(),x("p",Fe,n(e(s).errors.name),1)):_("",!0)]),d("div",Oe,[d("label",qe,n(e(o)("vendors.address")),1),t(e(p),{modelValue:e(s).address,"onUpdate:modelValue":r[4]||(r[4]=l=>e(s).address=l),disabled:e(s).processing},null,8,["modelValue","disabled"]),e(s).errors.address?(m(),x("p",Ae,n(e(s).errors.address),1)):_("",!0)]),d("div",We,[d("div",Ye,[d("label",Ze,n(e(o)("vendors.contact_person")),1),t(e(p),{modelValue:e(s).contact_person,"onUpdate:modelValue":r[5]||(r[5]=l=>e(s).contact_person=l),disabled:e(s).processing},null,8,["modelValue","disabled"]),e(s).errors.contact_person?(m(),x("p",Ge,n(e(s).errors.contact_person),1)):_("",!0)]),d("div",He,[d("label",Je,n(e(o)("vendors.tax_id")),1),t(e(p),{modelValue:e(s).tax_id,"onUpdate:modelValue":r[6]||(r[6]=l=>e(s).tax_id=l),disabled:e(s).processing},null,8,["modelValue","disabled"]),e(s).errors.tax_id?(m(),x("p",Ke,n(e(s).errors.tax_id),1)):_("",!0)])])]),t(e(M),null,{default:a(()=>[t(e(g),{type:"button",variant:"outline",onClick:r[7]||(r[7]=l=>f.value=!1),disabled:e(s).processing},{default:a(()=>[c(n(e(o)("common.cancel")),1)]),_:1},8,["disabled"]),t(e(g),{type:"submit",disabled:e(s).processing},{default:a(()=>[c(n(e(s).processing?e(o)("common.saving"):e(o)("common.save")),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),t(e(j),{open:k.value,"onUpdate:open":r[10]||(r[10]=l=>k.value=l)},{default:a(()=>[t(e(U),{class:"sm:max-w-[400px]"},{default:a(()=>[t(e(z),null,{default:a(()=>[t(e(E),null,{default:a(()=>[c(n(e(o)("common.confirm_delete")),1)]),_:1}),t(e(D),null,{default:a(()=>[c(n(e(o)("vendors.delete_confirmation",{name:u.value?.name})),1)]),_:1})]),_:1}),t(e(M),null,{default:a(()=>[t(e(g),{variant:"outline",onClick:r[9]||(r[9]=l=>k.value=!1)},{default:a(()=>[c(n(e(o)("common.cancel")),1)]),_:1}),t(e(g),{variant:"destructive",onClick:J},{default:a(()=>[c(n(e(o)("common.delete")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{xs as default};
