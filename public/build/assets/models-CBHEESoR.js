import{d as U,l as m,n as y,f as n,g as i,c as C,v as $,t as p,b as V,j as P,m as z,e as h,i as b,q as k,p as f,k as r}from"./app-Az55F6M8.js";import{c as w,_ as D}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{X as R,F as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{c as B}from"./createLucideIcon-iLJQO7DH.js";const q=B("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const A=B("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),H={class:"flex items-center gap-2 min-w-0"},K={class:"text-sm truncate"},O={class:"flex items-center gap-1 shrink-0"},X={class:"text-center"},Y={class:"text-xs text-muted-foreground mt-1"},G=["accept","disabled"],J={key:2,class:"mt-1.5 text-xs text-destructive"},se=U({__name:"FileUpload",props:{modelValue:{},accept:{},maxSize:{},class:{},disabled:{type:Boolean},existingFile:{}},emits:["update:modelValue","remove"],setup(o,{emit:j}){const a=o,v=j,c=k(!1),F=k(null),s=k(null),u=f(()=>a.accept??".pdf,.jpg,.jpeg,.png"),x=f(()=>a.maxSize??10240),g=f(()=>a.modelValue?a.modelValue.name:a.existingFile?a.existingFile.name:null),E=f(()=>{const t=g.value?.toLowerCase()??"";return t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".png")?q:W});function I(t){if(s.value=null,t.size>x.value*1024)return s.value=`File size exceeds ${Math.round(x.value/1024)}MB limit`,!1;const e=u.value.split(",").map(d=>d.trim().toLowerCase()),l="."+t.name.split(".").pop()?.toLowerCase(),S=t.type.toLowerCase();return e.some(d=>d===l||d===S||d==="*")?!0:(s.value=`File type not allowed. Accepted: ${u.value}`,!1)}function _(t){I(t)&&v("update:modelValue",t)}function M(t){if(c.value=!1,a.disabled)return;const e=t.dataTransfer?.files[0];e&&_(e)}function T(t){const e=t.target,l=e.files?.[0];l&&_(l),e.value=""}function L(){v("update:modelValue",null),v("remove"),s.value=null}function N(){a.disabled||F.value?.click()}return(t,e)=>(r(),m("div",{class:y(n(w)("w-full",a.class))},[g.value?(r(),m("div",{key:0,class:y(n(w)("flex items-center justify-between gap-2 rounded-md border p-3","border-input bg-muted/30"))},[i("div",H,[(r(),C($(E.value),{class:"size-4 text-muted-foreground shrink-0"})),i("span",K,p(g.value),1)]),i("div",O,[o.existingFile?.url?(r(),C(n(D),{key:0,type:"button",variant:"ghost",size:"sm",as:"a",href:o.existingFile.url,target:"_blank"},{default:V(()=>[...e[2]||(e[2]=[P(" Preview ",-1)])]),_:1},8,["href"])):z("",!0),h(n(D),{type:"button",variant:"ghost",size:"sm",disabled:o.disabled,onClick:L},{default:V(()=>[h(n(R),{class:"size-4"})]),_:1},8,["disabled"])])],2)):(r(),m("div",{key:1,class:y(n(w)("relative flex flex-col items-center justify-center gap-2 rounded-md border-2 border-dashed p-6 transition-colors cursor-pointer","border-input hover:border-primary/50",c.value&&"border-primary bg-primary/5",o.disabled&&"cursor-not-allowed opacity-50",s.value&&"border-destructive")),onClick:N,onDragover:e[0]||(e[0]=b(l=>c.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=b(l=>c.value=!1,["prevent"])),onDrop:b(M,["prevent"])},[h(n(A),{class:"size-8 text-muted-foreground"}),i("div",X,[e[3]||(e[3]=i("p",{class:"text-sm font-medium"}," Drop file here or click to upload ",-1)),i("p",Y,p(u.value)+" (max "+p(Math.round(x.value/1024))+"MB) ",1)]),i("input",{ref_key:"inputRef",ref:F,type:"file",accept:u.value,disabled:o.disabled,class:"hidden",onChange:T},null,40,G)],34)),s.value?(r(),m("p",J,p(s.value),1)):z("",!0)],2))}}),ne=["contract","invoice","handover_report","tax_id","tax_invoice"];export{ne as D,A as U,se as _};
