import{d as q,u as A,q as C,w as M,c as _,b as r,e as o,f as e,h as O,g as i,k as v,j as l,t as c,m as g,s as m}from"./app-Az55F6M8.js";import{_ as R,u as G}from"./useActionConfirmation-BPstB5Uy.js";import{_ as H}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as J}from"./index-BLT0FxeU.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{S as K,_ as L}from"./DataTable.vue_vue_type_script_setup_true_lang-KlVNUek7.js";import{i as y,c as Q,d as W,e as X,f as h,_ as Y,g as Z,a as ee,h as te,j as ae,k as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-9NyD3cCB.js";import{E as re,_ as ne}from"./Pagination.vue_vue_type_script_setup_true_lang-DOeNEDps.js";import{_ as ce}from"./StatusBadge.vue_vue_type_script_setup_true_lang-Ik7GkR5h.js";import{u as ie}from"./useDateFormat-BThD_v7S.js";import{P as le}from"./plus-Rxuc06gk.js";import{E as me}from"./eye-CfgMQgEh.js";import{P as ue}from"./pencil-B0Lx0GLH.js";import{T as de}from"./trash-2-1tc8fb7c.js";import{u as fe}from"./index-Dwg1ok0u.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D7dEZzdR.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CpvOfIA5.js";import"./createLucideIcon-iLJQO7DH.js";import"./Spinner.vue_vue_type_script_setup_true_lang-MOyKrSw-.js";import"./chevron-down-DzsoBm0Z.js";import"./VisuallyHidden-C4XAoWlX.js";import"./useForwardExpose-Dz4tKeCh.js";import"./index-BDqSilVs.js";const pe={class:"flex flex-col gap-6 p-6"},_e={class:"flex items-center justify-between"},ve={class:"flex items-center gap-4"},be={class:"relative flex-1 max-w-sm"},ge={class:"overflow-auto"},ye={class:"sr-only"},he={class:"shrink-0 border-t bg-background pt-4"},Je=q({__name:"Index",props:{contracts:{},filters:{}},setup(u){const d=u,{t}=A(),{formatDateOnly:S}=ie(),{canCreate:D,canUpdate:w,canDelete:z}=Z(),n=G(),I=[{title:t("nav.contracts"),href:y().url}],b=C(d.filters.search??""),N=fe(a=>{m.get(y().url,{...d.filters,search:a||void 0,page:1},{preserveState:!0,preserveScroll:!0})},300);M(b,a=>N(a));function P(a,f){m.get(y().url,{...d.filters,sort:a,direction:f},{preserveState:!0,preserveScroll:!0})}function V(a){m.get(a,{},{preserveState:!0,preserveScroll:!0})}const T=[{key:"number",label:t("contracts.number"),sortable:!0},{key:"date",label:t("contracts.date"),sortable:!0},{key:"vendor.name",label:t("contracts.vendor")},{key:"cooperation_type",label:t("contracts.cooperation_type"),sortable:!0},{key:"amount",label:t("contracts.amount"),sortable:!0,class:"text-right"},{key:"is_active",label:t("common.status"),sortable:!0},{key:"actions",label:"",class:"w-[70px]"}];function x(a){return a==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}const p=C(null);function E(a){m.get(ee(a.id).url)}function F(){m.get(te().url)}function j(a){m.get(ae(a.id).url)}function B(a){p.value=a,n.requestConfirmation({title:t("common.confirm_delete"),description:t("contracts.delete_confirmation",{number:a.number}),confirmText:t("common.delete"),destructive:!0,details:[{label:t("contracts.number"),value:a.number},{label:t("contracts.amount"),value:x(a.amount)}]},U)}function U(){p.value&&m.delete(oe(p.value.id).url,{onSuccess:()=>{p.value=null}})}return(a,f)=>(v(),_(Y,{breadcrumbs:I},{default:r(()=>[o(e(O),{title:e(t)("nav.contracts")},null,8,["title"]),i("div",pe,[i("div",_e,[o(H,{title:e(t)("nav.contracts"),description:e(t)("contracts.description")},null,8,["title","description"]),e(D)("contracts")?(v(),_(e($),{key:0,onClick:F},{default:r(()=>[o(e(le),{class:"mr-2 size-4"}),l(" "+c(e(t)("contracts.create")),1)]),_:1})):g("",!0)]),i("div",ve,[i("div",be,[o(e(K),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),o(e(se),{modelValue:b.value,"onUpdate:modelValue":f[0]||(f[0]=s=>b.value=s),placeholder:e(t)("common.search"),class:"pl-9"},null,8,["modelValue","placeholder"])])]),i("div",ge,[o(e(L),{columns:T,data:u.contracts.data,"sort-field":typeof d.filters.sort=="string"?d.filters.sort:void 0,"sort-direction":d.filters.direction,"empty-text":e(t)("common.no_data"),hoverable:"",onSort:P},{"cell-cooperation_type":r(({value:s})=>[o(e(J),{variant:s==="progress"?"default":"secondary"},{default:r(()=>[l(c(e(t)(`contracts.types.${s}`)),1)]),_:2},1032,["variant"])]),"cell-date":r(({value:s})=>[l(c(e(S)(s)),1)]),"cell-amount":r(({value:s})=>[l(c(x(s)),1)]),"cell-is_active":r(({value:s})=>[o(e(ce),{status:s?"active":"inactive"},null,8,["status"])]),"cell-actions":r(({row:s})=>[o(e(Q),null,{default:r(()=>[o(e(W),{"as-child":""},{default:r(()=>[o(e($),{variant:"ghost",size:"icon",class:"size-8"},{default:r(()=>[o(e(re),{class:"size-4"}),i("span",ye,c(e(t)("common.actions")),1)]),_:1})]),_:1}),o(e(X),{align:"end"},{default:r(()=>[o(e(h),{onClick:k=>E(s)},{default:r(()=>[o(e(me),{class:"mr-2 size-4"}),l(" "+c(e(t)("common.view")),1)]),_:1},8,["onClick"]),e(w)("contracts")?(v(),_(e(h),{key:0,onClick:k=>j(s)},{default:r(()=>[o(e(ue),{class:"mr-2 size-4"}),l(" "+c(e(t)("common.edit")),1)]),_:1},8,["onClick"])):g("",!0),e(z)("contracts")?(v(),_(e(h),{key:1,class:"text-destructive focus:text-destructive",onClick:k=>B(s)},{default:r(()=>[o(e(de),{class:"mr-2 size-4"}),l(" "+c(e(t)("common.delete")),1)]),_:1},8,["onClick"])):g("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","sort-field","sort-direction","empty-text"])]),i("div",he,[o(e(ne),{links:u.contracts.links,from:u.contracts.from,to:u.contracts.to,total:u.contracts.total,onNavigate:V},null,8,["links","from","to","total"])])]),o(R,{open:e(n).open.value,"onUpdate:open":f[1]||(f[1]=s=>e(n).open.value=s),title:e(n).title.value,description:e(n).description.value,"confirm-text":e(n).confirmText.value,"cancel-text":e(n).cancelText.value,destructive:e(n).destructive.value,details:e(n).details.value,onConfirm:e(n).confirm,onCancel:e(n).cancel},null,8,["open","title","description","confirm-text","cancel-text","destructive","details","onConfirm","onCancel"])]),_:1}))}});export{Je as default};
