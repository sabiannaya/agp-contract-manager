import{d as J,u as K,q as $,w as L,a as Q,c as h,b as d,e as o,f as e,h as R,g as l,k as p,j as f,t as r,m as _,i as X,l as y,s as k,p as ee}from"./app-Az55F6M8.js";import{_ as U,u as j}from"./useActionConfirmation-BPstB5Uy.js";import{_ as te}from"./Heading.vue_vue_type_script_setup_true_lang-DzT-PsX3.js";import{_ as V}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CjG2TDFh.js";import{S as se,_ as oe}from"./DataTable.vue_vue_type_script_setup_true_lang-KlVNUek7.js";import{_ as ae,a as ne,b as ie,c as le,d as re}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D7dEZzdR.js";import{_ as de}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CpvOfIA5.js";import{W as S,c as ce,d as me,e as ue,f as T,_ as pe,g as _e,E as fe,Y as ve,Z as xe,$ as be}from"./AppLayout.vue_vue_type_script_setup_true_lang-DyTogOSr.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-9NyD3cCB.js";import{E as ge,_ as ye}from"./Pagination.vue_vue_type_script_setup_true_lang-DOeNEDps.js";import{_ as ke}from"./StatusBadge.vue_vue_type_script_setup_true_lang-Ik7GkR5h.js";import{P as he}from"./plus-Rxuc06gk.js";import{E as Ve}from"./eye-CfgMQgEh.js";import{P as Ce}from"./pencil-B0Lx0GLH.js";import{T as $e}from"./trash-2-1tc8fb7c.js";import{u as Se}from"./index-Dwg1ok0u.js";import"./createLucideIcon-iLJQO7DH.js";import"./Spinner.vue_vue_type_script_setup_true_lang-MOyKrSw-.js";import"./chevron-down-DzsoBm0Z.js";import"./useForwardPropsEmits-DcGYh6Gw.js";import"./VisuallyHidden-C4XAoWlX.js";import"./useForwardExpose-Dz4tKeCh.js";import"./index-BDqSilVs.js";const Te={class:"flex flex-col gap-6 p-6"},we={class:"flex items-center justify-between"},Ue={class:"flex items-center gap-4"},je={class:"relative flex-1 max-w-sm"},ze={class:"overflow-auto"},Ee={class:"sr-only"},De={class:"shrink-0 border-t bg-background pt-4"},Ne={class:"grid gap-4"},Fe={class:"grid grid-cols-2 gap-4"},Ie={class:"space-y-2"},Me={class:"text-sm font-medium"},Pe={key:0,class:"text-sm text-destructive"},Be={class:"space-y-2"},qe={class:"text-sm font-medium"},Oe={key:0,class:"text-sm text-destructive"},Ae={class:"space-y-2"},We={class:"text-sm font-medium"},Ye={key:0,class:"text-sm text-destructive"},Ze={class:"space-y-2"},Ge={class:"text-sm font-medium"},He={key:0,class:"text-sm text-destructive"},Je={class:"grid grid-cols-2 gap-4"},Ke={class:"space-y-2"},Le={class:"text-sm font-medium"},Qe={key:0,class:"text-sm text-destructive"},Re={class:"space-y-2"},Xe={class:"text-sm font-medium"},et={key:0,class:"text-sm text-destructive"},Ct=J({__name:"Index",props:{vendors:{},filters:{}},setup(b){const g=b,{t:s}=K(),{canCreate:z,canUpdate:E,canDelete:D}=_e(),m=j(),u=j(),N=[{title:s("nav.vendors"),href:S().url}],C=$(g.filters.search??""),F=Se(a=>{k.get(S().url,{...g.filters,search:a||void 0,page:1},{preserveState:!0,preserveScroll:!0})},300);L(C,a=>F(a));function I(a,i){k.get(S().url,{...g.filters,sort:a,direction:i},{preserveState:!0,preserveScroll:!0})}function M(a){k.get(a,{},{preserveState:!0,preserveScroll:!0})}const P=[{key:"code",label:s("vendors.code"),sortable:!0},{key:"name",label:s("vendors.name"),sortable:!0},{key:"address",label:s("vendors.address")},{key:"contact_person",label:s("vendors.contact_person")},{key:"tax_id",label:s("vendors.tax_id")},{key:"is_active",label:s("common.status"),sortable:!0},{key:"actions",label:"",class:"w-[70px]"}],v=$(!1),c=$(null),t=Q({code:"",name:"",address:"",join_date:new Date().toISOString().split("T")[0],contact_person:"",tax_id:"",is_active:!0}),B=ee(()=>c.value?s("vendors.edit"):s("vendors.create"));function q(){c.value=null,t.reset(),t.clearErrors(),v.value=!0}function O(a){k.get(fe(a.id).url)}function A(a){c.value=a,t.code=a.code,t.name=a.name,t.address=a.address,t.join_date=W(a.join_date),t.contact_person=a.contact_person,t.tax_id=a.tax_id,t.is_active=a.is_active,t.clearErrors(),v.value=!0}function W(a){return a?a.includes("T")?a.split("T")[0]:a.includes(" ")?a.split(" ")[0]:a:""}function Y(a){c.value=a,u.requestConfirmation({title:s("common.confirm_delete"),description:s("vendors.delete_confirmation",{name:a.name}),confirmText:s("common.delete"),destructive:!0,details:[{label:s("vendors.code"),value:a.code},{label:s("vendors.name"),value:a.name}]},H)}function Z(){c.value?t.put(xe(c.value.id).url,{onSuccess:()=>{v.value=!1}}):t.post(be().url,{onSuccess:()=>{v.value=!1}})}function G(){m.requestConfirmation({title:c.value?s("common.update"):s("common.create"),description:c.value?s("vendors.edit_description"):s("vendors.create_description"),confirmText:s("common.save"),details:[{label:s("vendors.code"),value:t.code||"-"},{label:s("vendors.name"),value:t.name||"-"}]},Z)}function H(){c.value&&k.delete(ve(c.value.id).url,{onSuccess:()=>{c.value=null}})}return(a,i)=>(p(),h(pe,{breadcrumbs:N},{default:d(()=>[o(e(R),{title:e(s)("nav.vendors")},null,8,["title"]),l("div",Te,[l("div",we,[o(te,{title:e(s)("nav.vendors"),description:e(s)("vendors.description")},null,8,["title","description"]),e(z)("vendors")?(p(),h(e(V),{key:0,onClick:q},{default:d(()=>[o(e(he),{class:"mr-2 size-4"}),f(" "+r(e(s)("vendors.create")),1)]),_:1})):_("",!0)]),l("div",Ue,[l("div",je,[o(e(se),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),o(e(x),{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=n=>C.value=n),placeholder:e(s)("common.search"),class:"pl-9"},null,8,["modelValue","placeholder"])])]),l("div",ze,[o(e(oe),{columns:P,data:b.vendors.data,"sort-field":typeof g.filters.sort=="string"?g.filters.sort:void 0,"sort-direction":g.filters.direction,"empty-text":e(s)("common.no_data"),hoverable:"",onSort:I},{"cell-is_active":d(({value:n})=>[o(e(ke),{status:n?"active":"inactive"},null,8,["status"])]),"cell-actions":d(({row:n})=>[o(e(ce),null,{default:d(()=>[o(e(me),{"as-child":""},{default:d(()=>[o(e(V),{variant:"ghost",size:"icon",class:"size-8"},{default:d(()=>[o(e(ge),{class:"size-4"}),l("span",Ee,r(e(s)("common.actions")),1)]),_:1})]),_:1}),o(e(ue),{align:"end"},{default:d(()=>[o(e(T),{onClick:w=>O(n)},{default:d(()=>[o(e(Ve),{class:"mr-2 size-4"}),f(" "+r(e(s)("common.view")),1)]),_:1},8,["onClick"]),e(E)("vendors")?(p(),h(e(T),{key:0,onClick:w=>A(n)},{default:d(()=>[o(e(Ce),{class:"mr-2 size-4"}),f(" "+r(e(s)("common.edit")),1)]),_:1},8,["onClick"])):_("",!0),e(D)("vendors")?(p(),h(e(T),{key:1,class:"text-destructive focus:text-destructive",onClick:w=>Y(n)},{default:d(()=>[o(e($e),{class:"mr-2 size-4"}),f(" "+r(e(s)("common.delete")),1)]),_:1},8,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","sort-field","sort-direction","empty-text"])]),l("div",De,[o(e(ye),{links:b.vendors.links,from:b.vendors.from,to:b.vendors.to,total:b.vendors.total,onNavigate:M},null,8,["links","from","to","total"])])]),o(e(ae),{open:v.value,"onUpdate:open":i[8]||(i[8]=n=>v.value=n)},{default:d(()=>[o(e(ne),{class:"sm:max-w-[500px]"},{default:d(()=>[o(e(ie),null,{default:d(()=>[o(e(le),null,{default:d(()=>[f(r(B.value),1)]),_:1}),o(e(re),null,{default:d(()=>[f(r(c.value?e(s)("vendors.edit_description"):e(s)("vendors.create_description")),1)]),_:1})]),_:1}),l("form",{onSubmit:X(G,["prevent"]),class:"space-y-4"},[l("div",Ne,[l("div",Fe,[l("div",Ie,[l("label",Me,r(e(s)("vendors.code")),1),o(e(x),{modelValue:e(t).code,"onUpdate:modelValue":i[1]||(i[1]=n=>e(t).code=n),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.code?(p(),y("p",Pe,r(e(t).errors.code),1)):_("",!0)]),l("div",Be,[l("label",qe,r(e(s)("vendors.join_date")),1),o(e(x),{modelValue:e(t).join_date,"onUpdate:modelValue":i[2]||(i[2]=n=>e(t).join_date=n),type:"date",disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.join_date?(p(),y("p",Oe,r(e(t).errors.join_date),1)):_("",!0)])]),l("div",Ae,[l("label",We,r(e(s)("vendors.name")),1),o(e(x),{modelValue:e(t).name,"onUpdate:modelValue":i[3]||(i[3]=n=>e(t).name=n),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.name?(p(),y("p",Ye,r(e(t).errors.name),1)):_("",!0)]),l("div",Ze,[l("label",Ge,r(e(s)("vendors.address")),1),o(e(x),{modelValue:e(t).address,"onUpdate:modelValue":i[4]||(i[4]=n=>e(t).address=n),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.address?(p(),y("p",He,r(e(t).errors.address),1)):_("",!0)]),l("div",Je,[l("div",Ke,[l("label",Le,r(e(s)("vendors.contact_person")),1),o(e(x),{modelValue:e(t).contact_person,"onUpdate:modelValue":i[5]||(i[5]=n=>e(t).contact_person=n),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.contact_person?(p(),y("p",Qe,r(e(t).errors.contact_person),1)):_("",!0)]),l("div",Re,[l("label",Xe,r(e(s)("vendors.tax_id")),1),o(e(x),{modelValue:e(t).tax_id,"onUpdate:modelValue":i[6]||(i[6]=n=>e(t).tax_id=n),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.tax_id?(p(),y("p",et,r(e(t).errors.tax_id),1)):_("",!0)])])]),o(e(de),null,{default:d(()=>[o(e(V),{type:"button",variant:"outline",onClick:i[7]||(i[7]=n=>v.value=!1),disabled:e(t).processing},{default:d(()=>[f(r(e(s)("common.cancel")),1)]),_:1},8,["disabled"]),o(e(V),{type:"submit",disabled:e(t).processing},{default:d(()=>[f(r(e(t).processing?e(s)("common.saving"):e(s)("common.save")),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),o(U,{open:e(m).open,"onUpdate:open":i[9]||(i[9]=n=>e(m).open=n),title:e(m).title,description:e(m).description,"confirm-text":e(m).confirmText,"cancel-text":e(m).cancelText,destructive:e(m).destructive,details:e(m).details,onConfirm:e(m).confirm,onCancel:e(m).cancel},null,8,["open","title","description","confirm-text","cancel-text","destructive","details","onConfirm","onCancel"]),o(U,{open:e(u).open,"onUpdate:open":i[10]||(i[10]=n=>e(u).open=n),title:e(u).title,description:e(u).description,"confirm-text":e(u).confirmText,"cancel-text":e(u).cancelText,destructive:e(u).destructive,details:e(u).details,onConfirm:e(u).confirm,onCancel:e(u).cancel},null,8,["open","title","description","confirm-text","cancel-text","destructive","details","onConfirm","onCancel"])]),_:1}))}});export{Ct as default};
